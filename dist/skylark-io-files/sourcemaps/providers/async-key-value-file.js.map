{"version":3,"sources":["providers/async-key-value-file.js"],"names":["define","files","PreloadFile","AsyncKeyValueFile","constructor","_fs","_path","_flag","_stat","contents","super","sync","cb","this","isDirty","_sync","getPath","getBuffer","getStats","e","resetDirty","close","providers"],"mappings":";;;;;;;AAAAA,OAAO,CACH,WACA,mBACD,SAAUC,EAAOC,GAChB,mBAEMC,UAA0BD,EAC5BE,YAAYC,EAAKC,EAAOC,EAAOC,EAAOC,GAClCC,MAAML,EAAKC,EAAOC,EAAOC,EAAOC,CAAQ,CAC5C,CACAE,KAAKC,GACGC,KAAKC,QAAQ,EACbD,KAAKR,IAAIU,MAAMF,KAAKG,QAAQ,EAAGH,KAAKI,UAAU,EAAGJ,KAAKK,SAAS,EAAG,IACzDC,GACDN,KAAKO,WAAW,EAEpBR,EAAGO,CAAC,CACR,CAAC,EAGDP,EAAG,CAEX,CACAS,MAAMT,GACFC,KAAKF,KAAKC,CAAE,CAChB,CACJ,CAIA,OAAOX,EAAMqB,UAAUnB,kBAAoBA,CAE/C,CAAC","file":"../../providers/async-key-value-file.js","sourcesContent":["define([\r\n    \"../files\",\r\n    '../preload-file'\r\n], function (files, PreloadFile) {\r\n    'use strict';\r\n\r\n    class AsyncKeyValueFile extends PreloadFile {\r\n        constructor(_fs, _path, _flag, _stat, contents) {\r\n            super(_fs, _path, _flag, _stat, contents);\r\n        }\r\n        sync(cb) {\r\n            if (this.isDirty()) {\r\n                this._fs._sync(this.getPath(), this.getBuffer(), this.getStats(), (e) => {\r\n                    if (!e) {\r\n                        this.resetDirty();\r\n                    }\r\n                    cb(e);\r\n                });\r\n            }\r\n            else {\r\n                cb();\r\n            }\r\n        }\r\n        close(cb) {\r\n            this.sync(cb);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return files.providers.AsyncKeyValueFile = AsyncKeyValueFile;\r\n    \r\n});"]}