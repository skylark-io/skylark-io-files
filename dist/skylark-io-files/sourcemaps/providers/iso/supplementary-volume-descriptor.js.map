{"version":3,"sources":["providers/iso/supplementary-volume-descriptor.js"],"names":["define","FileError","ErrorCodes","misc","PrimaryOrSupplementaryVolumeDescriptor","JolietDirectoryRecord","SupplementaryVolumeDescriptor","constructor","data","super","this","type","EIO","escapeSequence","third","toString","name","_data","slice","_constructRootDirectoryRecord","_getString","idx","len","getJolietString"],"mappings":";;;;;;;AAAAA,OAAO,CACH,mBACA,oBACA,SACA,+CACA,6BACD,SAAUC,EAAUC,EAAWC,EAAKC,EAAuCC,GAC1E,mBAIMC,UAAsCF,EACxCG,YAAYC,GAER,GADAC,MAAMD,CAAI,EACU,IAAhBE,KAAKC,KAAK,EACV,MAAM,IAAIV,EAAUC,EAAWU,IAAK,0CAA0C,EAElF,IAAMC,EAAiBH,KAAKG,eAAe,EACrCC,EAAQD,EAAe,GAG7B,GAA0B,KAAtBA,EAAe,IAAqC,KAAtBA,EAAe,IAClC,KAAVC,GAA4B,KAAVA,GAA4B,KAAVA,EACrC,MAAM,IAAIb,EAAUC,EAAWU,IAAK,mEAAmEC,EAAeE,SAAS,CAAG,CAE1I,CACAC,OACI,MAAO,QACX,CACAH,iBACI,OAAOH,KAAKO,MAAMC,MAAM,GAAI,GAAG,CACnC,CACAC,8BAA8BX,GAC1B,OAAO,IAAIH,EAAsBG,EAAM,CAAC,CAAC,CAC7C,CACAY,WAAWC,EAAKC,GACZ,OAAOnB,EAAKoB,gBAAgBb,KAAKO,MAAOI,EAAKC,CAAG,CACpD,CACJ,CAGA,OAAOhB,CACX,CAAC","file":"../../../providers/iso/supplementary-volume-descriptor.js","sourcesContent":["define([\r\n    '../../file-error',\r\n    '../../error-codes',\r\n    \"./misc\",\r\n    \"./primary-or-supplementary-volume-descriptor\",\r\n    \"./joliet-directory-record\"\r\n], function (FileError,ErrorCodes,misc,PrimaryOrSupplementaryVolumeDescriptor,JolietDirectoryRecord) {\r\n    'use strict';\r\n    /**\r\n     * @hidden\r\n     */\r\n    class SupplementaryVolumeDescriptor extends PrimaryOrSupplementaryVolumeDescriptor {\r\n        constructor(data) {\r\n            super(data);\r\n            if (this.type() !== 2 /* SupplementaryVolumeDescriptor */) {\r\n                throw new FileError(ErrorCodes.EIO, `Invalid supplementary volume descriptor.`);\r\n            }\r\n            const escapeSequence = this.escapeSequence();\r\n            const third = escapeSequence[2];\r\n            // Third character identifies what 'level' of the UCS specification to follow.\r\n            // We ignore it.\r\n            if (escapeSequence[0] !== 0x25 || escapeSequence[1] !== 0x2F ||\r\n                (third !== 0x40 && third !== 0x43 && third !== 0x45)) {\r\n                throw new FileError(ErrorCodes.EIO, `Unrecognized escape sequence for SupplementaryVolumeDescriptor: ${escapeSequence.toString()}`);\r\n            }\r\n        }\r\n        name() {\r\n            return \"Joliet\";\r\n        }\r\n        escapeSequence() {\r\n            return this._data.slice(88, 120);\r\n        }\r\n        _constructRootDirectoryRecord(data) {\r\n            return new JolietDirectoryRecord(data, -1);\r\n        }\r\n        _getString(idx, len) {\r\n            return misc.getJolietString(this._data, idx, len);\r\n        }\r\n    }\r\n\r\n\r\n    return SupplementaryVolumeDescriptor;\r\n});"]}