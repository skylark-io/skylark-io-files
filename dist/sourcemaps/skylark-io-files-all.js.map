{"version":3,"sources":["skylark-io-files-all.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../skylark-io-files-all.js","sourcesContent":["/*!\r\n   * The buffer module from node.js, for the browser.\r\n   *\r\n   * @author   Feross Aboukhadijeh <https://feross.org>\r\n   * @license  MIT\r\n   */\r\n\r\ndefine(\"skylark-langx-ns/_attach\",[],function(){return function(e,t,r){for(var n=(t=\"string\"==typeof t?t.split(\".\"):t).length,i=e,s=0,o=t[s++];s<n;)i=i[o]=i[o]||{},o=t[s++];if(i[o]){if(r)throw new Error(\"This namespace already exists:\"+t)}else i[o]=r||{};return i[o]}}),define(\"skylark-langx-ns/ns\",[\"./_attach\"],function(r){var n={attach:function(e,t){return r(n,e,t)}};return n}),define(\"skylark-langx-ns/main\",[\"./ns\"],function(e){return e}),define(\"skylark-langx-ns\",[\"skylark-langx-ns/main\"],function(e){return e}),define(\"skylark-io-files/files\",[\"skylark-langx-ns\"],function(e){return e.attach(\"data.files\",{providers:{}})}),define(\"skylark-io-files/action-type\",[\"./files\"],function(e){\"use strict\";var t,r;return(r=t=t||{})[r.NOP=0]=\"NOP\",r[r.THROW_EXCEPTION=1]=\"THROW_EXCEPTION\",r[r.TRUNCATE_FILE=2]=\"TRUNCATE_FILE\",r[r.CREATE_FILE=3]=\"CREATE_FILE\",e.ActionType=t}),define(\"skylark-io-files/error-codes\",[\"./files\"],function(e){\"use strict\";var t,r;return(r=t=t||{})[r.EPERM=1]=\"EPERM\",r[r.ENOENT=2]=\"ENOENT\",r[r.EIO=5]=\"EIO\",r[r.EBADF=9]=\"EBADF\",r[r.EACCES=13]=\"EACCES\",r[r.EBUSY=16]=\"EBUSY\",r[r.EEXIST=17]=\"EEXIST\",r[r.ENOTDIR=20]=\"ENOTDIR\",r[r.EISDIR=21]=\"EISDIR\",r[r.EINVAL=22]=\"EINVAL\",r[r.EFBIG=27]=\"EFBIG\",r[r.ENOSPC=28]=\"ENOSPC\",r[r.EROFS=30]=\"EROFS\",r[r.ENOTEMPTY=39]=\"ENOTEMPTY\",r[r.ENOTSUP=95]=\"ENOTSUP\",e.ErrorCodes=t}),define(\"skylark-langx-binary/binary\",[\"skylark-langx-ns\"],function(e){\"use strict\";return e.attach(\"langx.binary\",{fromBase64:function(e){for(var t,r,n,i,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",o=e.length/4*3,a=new ArrayBuffer(o),l=new Uint8Array(a),c=0,u=0;c<o;c+=3)t=s.indexOf(e.charAt(u++)),r=s.indexOf(e.charAt(u++)),n=s.indexOf(e.charAt(u++)),i=s.indexOf(e.charAt(u++)),l[c]=t<<2|r>>4,64!==n&&(l[c+1]=(15&r)<<4|n>>2),64!==i&&(l[c+2]=(3&n)<<6|i);return a},fromBinaryString:function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r},fromBuffer:function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e[n];return t},readInt8:function(e,t){return e[t]<<24>>24},readUint16:function(e,t){return e[t]<<8|e[t+1]},readUint32:function(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}})}),define(\"skylark-langx-binary/base64\",[],function(){\"use strict\";var e={byteLength:function(e){var e=u(e),t=e[0],e=e[1];return 3*(t+e)/4-e}};e.toByteArray=function(e){var t,r,n=u(e),i=n[0],n=n[1],s=new c(function(e,t){return 3*(e+t)/4-t}(i,n)),o=0,a=0<n?i-4:i;for(r=0;r<a;r+=4)t=l[e.charCodeAt(r)]<<18|l[e.charCodeAt(r+1)]<<12|l[e.charCodeAt(r+2)]<<6|l[e.charCodeAt(r+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=255&t;2===n&&(t=l[e.charCodeAt(r)]<<2|l[e.charCodeAt(r+1)]>>4,s[o++]=255&t);1===n&&(t=l[e.charCodeAt(r)]<<10|l[e.charCodeAt(r+1)]<<4|l[e.charCodeAt(r+2)]>>2,s[o++]=t>>8&255,s[o++]=255&t);return s},e.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],s=0,o=r-n;s<o;s+=16383)i.push(function(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(n));return i.join(\"\")}(e,s,o<s+16383?o:s+16383));1==n?(t=e[r-1],i.push(a[t>>2]+a[t<<4&63]+\"==\")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+\"=\"));return i.join(\"\")};for(var a=[],l=[],c=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",r=0,n=t.length;r<n;++r)a[r]=t[r],l[t.charCodeAt(r)]=r;function u(e){var t=e.length;if(0<t%4)throw new Error(\"Invalid string. Length must be a multiple of 4\");e=e.indexOf(\"=\"),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}return l[\"-\".charCodeAt(0)]=62,l[\"_\".charCodeAt(0)]=63,e}),define(\"skylark-langx-binary/ieee754\",[],function(){\"use strict\";var e={read:function(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=r?i-1:0,f=r?-1:1,i=e[t+h];for(h+=f,s=i&(1<<-u)-1,i>>=-u,u+=a;0<u;s=256*s+e[t+h],h+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;0<u;o=256*o+e[t+h],h+=f,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(i?-1:1);o+=Math.pow(2,n),s-=c}return(i?-1:1)*o*Math.pow(2,s-n)},write:function(e,t,r,n,i,s){var o,a,l=8*s-i-1,c=(1<<l)-1,u=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,d=n?1:-1,s=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-o))<1&&(o--,n*=2),2<=(t+=1<=o+u?h/n:h*Math.pow(2,1-u))*n&&(o++,n/=2),c<=o+u?(a=0,o=c):1<=o+u?(a=(t*n-1)*Math.pow(2,i),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));8<=i;e[r+f]=255&a,f+=d,a/=256,i-=8);for(o=o<<i|a,l+=i;0<l;e[r+f]=255&o,f+=d,o/=256,l-=8);e[r+f-d]|=128*s}};return e}),define(\"skylark-langx-binary/memory\",[\"./binary\",\"./base64\",\"./ieee754\"],function(e,S,s){\"use strict\";h.INSPECT_MAX_BYTES=50;var t=2147483647;function o(e){if(t<e)throw new RangeError(\"Invalid typed array length\");e=new Uint8Array(e);return e.__proto__=h.prototype,e}function h(e,t,r){if(\"number\"!=typeof e)return n(e,t,r);if(\"string\"==typeof t)throw new Error(\"If encoding is specified then the first argument must be a string\");return a(e)}function n(e,t,r){if(\"number\"==typeof e)throw new TypeError('\"value\" argument must not be a number');if(T(e)||e&&T(e.buffer)){var n=e,i=t;if(i<0||n.byteLength<i)throw new RangeError('\"offset\" is outside of buffer bounds');if(n.byteLength<i+(r||0))throw new RangeError('\"length\" is outside of buffer bounds');return(n=void 0===i&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,i):new Uint8Array(n,i,r)).__proto__=h.prototype,n}if(\"string\"!=typeof e){i=e;if(h.isBuffer(i))return r=0|c(i.length),0!==(n=o(r)).length&&i.copy(n,0,0,r),n;if(i){if(ArrayBuffer.isView(i)||\"length\"in i)return\"number\"!=typeof i.length||A(i.length)?o(0):l(i);if(\"Memory\"===i.type&&Array.isArray(i.data))return l(i.data)}throw new TypeError(\"The first argument must be one of type string, Memory, ArrayBuffer, Array, or Array-like Object.\")}var s,r=e,e=t;if(h.isEncoding(e=\"string\"==typeof e&&\"\"!==e?e:\"utf8\"))return t=0|u(r,e),s=o(t),s=(r=s.write(r,e))!==t?s.slice(0,r):s;throw new TypeError(\"Unknown encoding: \"+e)}function i(e){if(\"number\"!=typeof e)throw new TypeError('\"size\" argument must be of type number');if(e<0)throw new RangeError('\"size\" argument must not be negative')}function a(e){return i(e),o(e<0?0:0|c(e))}function l(e){for(var t=e.length<0?0:0|c(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e){if(t<=e)throw new RangeError(\"Attempt to allocate Memory larger than maximum size: 0x\"+t.toString(16)+\" bytes\");return 0|e}function u(e,t){if(h.isMemory(e))return e.length;if(ArrayBuffer.isView(e)||T(e))return e.byteLength;var r=(e=\"string\"!=typeof e?\"\"+e:e).length;if(0===r)return 0;for(var n=!1;;)switch(t){case\"ascii\":case\"latin1\":case\"binary\":return r;case\"utf8\":case\"utf-8\":case void 0:return I(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*r;case\"hex\":return r>>>1;case\"base64\":return N(e).length;default:if(n)return I(e).length;t=(\"\"+t).toLowerCase(),n=!0}}function r(e,t,r){var n,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return\"\";if((r=void 0===r||r>this.length?this.length:r)<=0)return\"\";if((r>>>=0)<=(t>>>=0))return\"\";for(e=e||\"utf8\";;)switch(e){case\"hex\":var s=this,o=t,a=r,l=s.length;(!a||a<0||l<a)&&(a=l);for(var c=\"\",u=o=!o||o<0?0:o;u<a;++u)c+=function(e){return e<16?\"0\"+e.toString(16):e.toString(16)}(s[u]);return c;case\"utf8\":case\"utf-8\":return x(this,t,r);case\"ascii\":var h=this,l=t,f=r,d=\"\";f=Math.min(h.length,f);for(var y=l;y<f;++y)d+=String.fromCharCode(127&h[y]);return d;case\"latin1\":case\"binary\":var p=this,o=t,g=r,m=\"\";g=Math.min(p.length,g);for(var w=o;w<g;++w)m+=String.fromCharCode(p[w]);return m;case\"base64\":return k=this,n=r,0===(v=t)&&n===k.length?S.fromByteArray(k):S.fromByteArray(k.slice(v,n));case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":for(var k=t,v=r,b=this.slice(k,v),E=\"\",_=0;_<b.length;_+=2)E+=String.fromCharCode(b[_]+256*b[_+1]);return E;default:if(i)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase(),i=!0}}function f(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,n,i){if(0===e.length)return-1;if(\"string\"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=A(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if(\"string\"==typeof t&&(t=h.from(t,n)),h.isMemory(t))return 0===t.length?-1:y(e,t,r,n,i);if(\"number\"==typeof t)return t&=255,\"function\"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):y(e,[t],r,n,i);throw new TypeError(\"val must be string, number or Memory\")}function y(e,t,r,n,i){var s=1,o=e.length,a=t.length;if(void 0!==n&&(\"ucs2\"===(n=String(n).toLowerCase())||\"ucs-2\"===n||\"utf16le\"===n||\"utf-16le\"===n)){if(e.length<2||t.length<2)return-1;o/=s=2,a/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i)for(var c=-1,u=r;u<o;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===a)return c*s}else-1!==c&&(u-=u-c),c=-1;else for(u=r=o<r+a?o-a:r;0<=u;u--){for(var h=!0,f=0;f<a;f++)if(l(e,u+f)!==l(t,f)){h=!1;break}if(h)return u}return-1}function g(e,t,r,n){return O(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function m(e,t,r,n){return O(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i.push(r%256),i.push(n);return i}(t,e.length-r),e,r,n)}function x(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,l,c=e[i],u=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=r)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(s=e[i+1]))&&127<(l=(31&c)<<6|63&s)&&(u=l);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&2047<(l=(15&c)<<12|(63&s)<<6|63&o)&&(l<55296||57343<l)&&(u=l);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&65535<(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)&&l<1114112&&(u=l)}null===u?(u=65533,h=1):65535<u&&(n.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=h}var f=n,d=f.length;if(d<=w)return String.fromCharCode.apply(String,f);for(var y=\"\",p=0;p<d;)y+=String.fromCharCode.apply(String,f.slice(p,p+=w));return y}h.kMaxLength=t,(h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||\"undefined\"==typeof console||\"function\"!=typeof console.error||console.error(\"This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.\"),Object.defineProperty(h.prototype,\"parent\",{get:function(){if(this instanceof h)return this.buffer}}),Object.defineProperty(h.prototype,\"offset\",{get:function(){if(this instanceof h)return this.byteOffset}}),\"undefined\"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=n,h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,r){return t=t,r=r,i(e=e),!(e<=0)&&void 0!==t?\"string\"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},h.allocUnsafe=a,h.allocUnsafeSlow=a,h.isMemory=h.isBuffer=function(e){return null!=e&&!0===e._isMemory&&e!==h.prototype},h.compare=function(e,t){if(!h.isMemory(e)||!h.isMemory(t))throw new TypeError(\"Arguments must be Buffers\");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=h.allocUnsafe(t),n=0,i=0;i<e.length;++i){var s=e[i];if(ArrayBuffer.isView(s)&&(s=h.from(s)),!h.isMemory(s))throw new TypeError('\"list\" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},h.byteLength=u,h.toArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e[n];return t},h.prototype._isMemory=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError(\"Memory size must be a multiple of 16-bits\");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError(\"Memory size must be a multiple of 32-bits\");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError(\"Memory size must be a multiple of 64-bits\");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?\"\":0===arguments.length?x(this,0,e):r.apply(this,arguments)},h.prototype.equals=function(e){if(h.isMemory(e))return this===e||0===h.compare(this,e);throw new TypeError(\"Argument must be a Memory\")},h.prototype.inspect=function(){var e=\"\",t=h.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString(\"hex\",0,t).match(/.{2}/g).join(\" \"),this.length>t)&&(e+=\" ... \"),\"<Memory \"+e+\">\"},h.prototype.compare=function(e,t,r,n,i){if(!h.isMemory(e))throw new TypeError(\"Argument must be a Memory\");if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError(\"out of range index\");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),l=this.slice(n,i),c=e.slice(t,r),u=0;u<a;++u)if(l[u]!==c[u]){s=l[u],o=c[u];break}return s<o?-1:o<s?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n=\"utf8\",r=this.length,t=0;else if(void 0===r&&\"string\"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error(\"Memory.write(string, encoding, offset[, length]) is no longer supported\");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n=\"utf8\")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");n=n||\"utf8\";for(var s,o,a,l=!1;;)switch(n){case\"hex\":var c=this,u=e,h=t,f=r,d=(h=Number(h)||0,c.length-h);(!f||d<(f=Number(f)))&&(f=d),(d=u.length)/2<f&&(f=d/2);for(var y=0;y<f;++y){var p=parseInt(u.substr(2*y,2),16);if(A(p))return y;c[h+y]=p}return y;case\"utf8\":case\"utf-8\":return d=t,a=r,O(I(e,(o=this).length-d),o,d,a);case\"ascii\":return g(this,e,t,r);case\"latin1\":case\"binary\":return g(this,e,t,r);case\"base64\":return o=this,a=t,s=r,O(N(e),o,a,s);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return m(this,e,t,r);default:if(l)throw new TypeError(\"Unknown encoding: \"+n);n=(\"\"+n).toLowerCase(),l=!0}},h.prototype.toJSON=function(){return{type:\"Memory\",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function p(e,t,r){if(e%1!=0||e<0)throw new RangeError(\"offset is not uint\");if(r<e+t)throw new RangeError(\"Trying to access beyond buffer length\")}function k(e,t,r,n,i,s){if(!h.isMemory(e))throw new TypeError('\"buffer\" argument must be a Memory instance');if(i<t||t<s)throw new RangeError('\"value\" argument is out of bounds');if(r+n>e.length)throw new RangeError(\"Index out of range\")}function v(e,t,r,n){if(r+n>e.length)throw new RangeError(\"Index out of range\");if(r<0)throw new RangeError(\"Index out of range\")}function b(e,t,r,n,i){return t=+t,r>>>=0,i||v(e,0,r,4),s.write(e,t,r,n,23,4),r+4}function E(e,t,r,n,i){return t=+t,r>>>=0,i||v(e,0,r,8),s.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=h.prototype,r},h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||p(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||p(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},h.prototype.readUInt8=function(e,t){return e>>>=0,t||p(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||p(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||p(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||p(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||p(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||p(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||p(e,t,this.length);for(var n=t,i=1,s=this[e+--n];0<n&&(i*=256);)s+=this[e+--n]*i;return(i*=128)<=s&&(s-=Math.pow(2,8*t)),s},h.prototype.readInt8=function(e,t){return e>>>=0,t||p(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||p(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt16BE=function(e,t){e>>>=0,t||p(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||p(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||p(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||p(e,4,this.length),s.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||p(e,4,this.length),s.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||p(e,8,this.length),s.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||p(e,8,this.length),s.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},h.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;0<=--i&&(s*=256);)this[t+i]=e/s&255;return t+r},h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||k(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||k(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,s=1,o=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||k(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,r){return b(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return b(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return E(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return E(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isMemory(e))throw new TypeError(\"argument should be a Memory\");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError(\"targetStart out of bounds\");if(r<0||r>=this.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"sourceEnd out of bounds\");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&\"function\"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=i-1;0<=s;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},h.prototype.fill=function(e,t,r,n){if(\"string\"==typeof e){if(\"string\"==typeof t?(n=t,t=0,r=this.length):\"string\"==typeof r&&(n=r,r=this.length),void 0!==n&&\"string\"!=typeof n)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof n&&!h.isEncoding(n))throw new TypeError(\"Unknown encoding: \"+n);var i;1===e.length&&(i=e.charCodeAt(0),\"utf8\"===n&&i<128||\"latin1\"===n)&&(e=i)}else\"number\"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError(\"Out of range index\");var s;if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,\"number\"==typeof(e=e||0))for(s=t;s<r;++s)this[s]=e;else{var o=h.isMemory(e)?e:new h(e,n),a=o.length;if(0===a)throw new TypeError('The value \"'+e+'\" is invalid for argument \"value\"');for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var _=/[^+/0-9A-Za-z-_]/g;function I(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],o=0;o<n;++o){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&s.push(239,191,189);continue}if(o+1===n){-1<(t-=3)&&s.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,r<128){if(--t<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error(\"Invalid code point\");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function N(e){return S.toByteArray(function(e){if((e=(e=e.split(\"=\")[0]).trim().replace(_,\"\")).length<2)return\"\";for(;e.length%4!=0;)e+=\"=\";return e}(e))}function O(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function T(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&\"ArrayBuffer\"===e.constructor.name&&\"number\"==typeof e.byteLength}function A(e){return e!=e}return e.Memory=h}),define(\"skylark-langx-binary/buffer\",[\"./memory\"],function(e){return e}),define(\"skylark-io-files/error-strings\",[\"./files\",\"./error-codes\"],function(e,t){\"use strict\";var r={};return r[t.EPERM]=\"Operation not permitted.\",r[t.ENOENT]=\"No such file or directory.\",r[t.EIO]=\"Input/output error.\",r[t.EBADF]=\"Bad file descriptor.\",r[t.EACCES]=\"Permission denied.\",r[t.EBUSY]=\"Resource busy or locked.\",r[t.EEXIST]=\"File exists.\",r[t.ENOTDIR]=\"File is not a directory.\",r[t.EISDIR]=\"File is a directory.\",r[t.EINVAL]=\"Invalid argument.\",r[t.EFBIG]=\"File is too big.\",r[t.ENOSPC]=\"No space left on disk.\",r[t.EROFS]=\"Cannot modify a read-only file system.\",r[t.ENOTEMPTY]=\"Directory is not empty.\",r[t.ENOTSUP]=\"Operation is not supported.\",e.ErrorStrings=r}),define(\"skylark-io-files/file-error\",[\"skylark-langx-binary/buffer\",\"./files\",\"./error-codes\",\"./error-strings\"],function(n,e,i,s){\"use strict\";class r extends Error{constructor(e,t=s[e],r){super(t),this.syscall=\"\",this.errno=e,this.code=i[e],this.path=r,this.stack=(new Error).stack,this.message=`Error: ${this.code}: `+t+(this.path?`, '${this.path}'`:\"\")}static fromJSON(e){var t=new r(0);return t.errno=e.errno,t.code=e.code,t.path=e.path,t.stack=e.stack,t.message=e.message,t}static fromBuffer(e,t=0){return r.fromJSON(JSON.parse(e.toString(\"utf8\",t+4,t+4+e.readUInt32LE(t))))}static create(e,t){return new r(e,s[e],t)}static ENOENT(e){return this.create(i.ENOENT,e)}static EEXIST(e){return this.create(i.EEXIST,e)}static EISDIR(e){return this.create(i.EISDIR,e)}static ENOTDIR(e){return this.create(i.ENOTDIR,e)}static EPERM(e){return this.create(i.EPERM,e)}static ENOTEMPTY(e){return this.create(i.ENOTEMPTY,e)}toString(){return this.message}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}}writeToBuffer(e=n.alloc(this.bufferSize()),t=0){var r=e.write(JSON.stringify(this.toJSON()),t+4);return e.writeUInt32LE(r,t),e}bufferSize(){return 4+n.byteLength(JSON.stringify(this.toJSON()))}}return e.FileError=r}),define(\"skylark-io-files/base-file\",[\"./files\",\"./error-codes\",\"./file-error\"],function(e,n,i){\"use strict\";return e.BaseFile=class{sync(e){e(new i(n.ENOTSUP))}syncSync(){throw new i(n.ENOTSUP)}datasync(e){this.sync(e)}datasyncSync(){return this.syncSync()}chown(e,t,r){r(new i(n.ENOTSUP))}chownSync(e,t){throw new i(n.ENOTSUP)}chmod(e,t){t(new i(n.ENOTSUP))}chmodSync(e){throw new i(n.ENOTSUP)}utimes(e,t,r){r(new i(n.ENOTSUP))}utimesSync(e,t){throw new i(n.ENOTSUP)}}}),define(\"skylark-io-files/file-flag\",[\"./files\",\"./error-codes\",\"./file-error\",\"./action-type\"],function(e,t,r,n){\"use strict\";class i{constructor(e){if(this.flagStr=e,i.validFlagStrs.indexOf(e)<0)throw new r(t.EINVAL,\"Invalid flag: \"+e)}static getFileFlag(e){return i.flagCache.hasOwnProperty(e)?i.flagCache[e]:i.flagCache[e]=new i(e)}getFlagString(){return this.flagStr}isReadable(){return-1!==this.flagStr.indexOf(\"r\")||-1!==this.flagStr.indexOf(\"+\")}isWriteable(){return-1!==this.flagStr.indexOf(\"w\")||-1!==this.flagStr.indexOf(\"a\")||-1!==this.flagStr.indexOf(\"+\")}isTruncating(){return-1!==this.flagStr.indexOf(\"w\")}isAppendable(){return-1!==this.flagStr.indexOf(\"a\")}isSynchronous(){return-1!==this.flagStr.indexOf(\"s\")}isExclusive(){return-1!==this.flagStr.indexOf(\"x\")}pathExistsAction(){return this.isExclusive()?n.THROW_EXCEPTION:this.isTruncating()?n.TRUNCATE_FILE:n.NOP}pathNotExistsAction(){return(this.isWriteable()||this.isAppendable())&&\"r+\"!==this.flagStr?n.CREATE_FILE:n.THROW_EXCEPTION}}return i.flagCache={},i.validFlagStrs=[\"r\",\"r+\",\"rs\",\"rs+\",\"w\",\"wx\",\"w+\",\"wx+\",\"a\",\"ax\",\"a+\",\"ax+\"],e.FileFlag=i}),define(\"skylark-langx-types/types\",[\"skylark-langx-ns\"],function(e){var t,r=Array.isArray,n={}.toString,i=(t={},\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \").forEach(function(e){t[\"[object \"+e+\"]\"]=e.toLowerCase()}),function(e){return null==e?String(e):t[n.call(e)]||\"object\"});function s(e){for(var t in e)if(null!==e[t])return!1;return!0}function o(e){return\"function\"==i(e)}function a(e){return e&&e.nodeType}function l(e){return\"number\"==typeof e}function c(e){var t=typeof e;return\"function\"==t||\"object\"==t&&!!e}function u(e){return\"string\"==typeof e}function h(e){return e&&e==e.window}function f(e){return\"symbol\"==typeof e}var d=NaN,y=/^\\s+|\\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,m=/^0o[0-7]+$/i,w=parseInt;function k(e){return e?(e=v(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function v(e){if(\"number\"==typeof e)return e;if(f(e))return d;if(\"string\"!=typeof(e=c(e)?c(t=\"function\"==typeof e.valueOf?e.valueOf():e)?t+\"\":t:e))return 0===e?e:+e;e=e.replace(y,\"\");var t=g.test(e);return t||m.test(e)?w(e.slice(2),t?2:8):p.test(e)?d:+e}return e.attach(\"langx.types\",{isArray:r||function(e){return object&&object.constructor===Array},isArrayLike:function(e){return!u(e)&&!a(e)&&\"number\"==typeof e.length&&!o(e)},isBoolean:function(e){return!0===e||!1===e||\"[object Boolean]\"===n.call(e)},isDefined:function(e){return void 0!==e},isDocument:function(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE},isElement:function(e){return!(!e||1!==e.nodeType)},isEmpty:s,isEmptyObject:s,isFunction:o,isHtmlNode:a,isInstanceOf:function(e,t){return void 0!==e&&(null===e||t==Object||(\"number\"==typeof e?t===Number:\"string\"==typeof e?t===String:\"boolean\"==typeof e?t===Boolean:\"string\"==typeof e?t===String:e instanceof t||!(!e||!e.isInstanceOf)&&e.isInstanceOf(t)))},isNaN:function(e){return isNaN(e)},isNull:function(e){return null===e},isNumber:l,isNumeric:l,isObject:c,isPlainObject:function(e){return c(e)&&!h(e)&&Object.getPrototypeOf(e)==Object.prototype},isString:u,isSameOrigin:function(e){var t;if(e)return t=location.protocol+\"//\"+location.hostname,location.port&&(t+=\":\"+location.port),e.startsWith(t)},isSymbol:f,isUndefined:function(e){return void 0===e},isWindow:h,type:i,toFinite:k,toNumber:v,toInteger:function(e){var t=(e=k(e))%1;return e==e?t?e-t:e:0}})}),define(\"skylark-langx-types/main\",[\"./types\"],function(e){return e}),define(\"skylark-langx-types\",[\"skylark-langx-types/main\"],function(e){return e}),define(\"skylark-langx-funcs/funcs\",[\"skylark-langx-ns\"],function(e,t,r){return e.attach(\"langx.funcs\",{noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1}})}),define(\"skylark-langx-funcs/defer\",[\"skylark-langx-types\",\"./funcs\"],function(l,e){return e.defer=function(e,t,r,n){var i,s,o={cancel:null},a=e;return l.isNumber(t)||l.isFunction(t)||(n=r,r=t,t=0),r&&(a=function(){e.apply(n,r)}),l.isFunction(t)?(i=!1,t(function(){i||a()}),o.cancel=function(){i=!0}):0==t&&requestAnimationFrame?(s=requestAnimationFrame(a),o.cancel=function(){return cancelAnimationFrame(s)}):(s=setTimeout(a,t),o.cancel=function(){return clearTimeout(s)}),o}}),define(\"skylark-langx-paths/paths\",[\"skylark-langx-ns\"],function(e){var t={_makeLong:function(e){return e},_removeDuplicateSeps:function(e){return e=e.replace(this._replaceRegex,this.sep)},sep:\"/\"};return t._replaceRegex=new RegExp(\"//+\",\"g\"),t.delimiter=\":\",e.attach(\"langx.paths\",(t.posix=t).win32=t)}),define(\"skylark-langx-paths/normalize\",[\"./paths\"],function(o){return o.normalize=function(e){for(var t=(e=\"\"===e?\".\":e).charAt(0)===o.sep,r=(e=o._removeDuplicateSeps(e)).split(o.sep),n=[],i=0;i<r.length;i++){var s=r[i];\".\"!==s&&(\"..\"===s&&(t||!t&&0<n.length&&\"..\"!==n[0])?n.pop():n.push(s))}return!t&&n.length<2&&(1===n.length?\"\"===n[0]&&n.unshift(\".\"):n.push(\".\")),e=n.join(o.sep),e=t&&e.charAt(0)!==o.sep?o.sep+e:e}}),define(\"skylark-langx-paths/basename\",[\"./paths\",\"./normalize\"],function(n,i){return n.basename=function(e,t){var r;return void 0===t&&(t=\"\"),\"\"===e?e:\"\"===(r=(e=(e=i(e)).split(n.sep))[e.length-1])&&1<e.length?e[e.length-2]:0<t.length&&r.substr(r.length-t.length)===t?r.substr(0,r.length-t.length):r}}),define(\"skylark-langx-paths/dirname\",[\"./paths\"],function(r){return r.dirname=function(e){var t=(e=r._removeDuplicateSeps(e)).charAt(0)===r.sep;return\"\"===(e=e.split(r.sep)).pop()&&0<e.length&&e.pop(),1<e.length||1===e.length&&!t?e.join(r.sep):t?r.sep:\".\"}}),define(\"skylark-langx-paths/extname\",[\"./paths\",\"./normalize\"],function(r,n){return r.extname=function(e){var t=(e=n(e)).split(r.sep);return\"..\"===(e=\"\"===(e=t.pop())&&0<t.length?t.pop():e)||-1===(t=e.lastIndexOf(\".\"))||0===t?\"\":e.substr(t)}}),define(\"skylark-langx-paths/format\",[\"./paths\"],function(t){return t.format=function(e){if(null===e||\"object\"!=typeof e)throw new TypeError(\"Parameter 'pathObject' must be an object, not \"+typeof e);if(\"string\"!=typeof(e.root||\"\"))throw new TypeError(\"'pathObject.root' must be a string or undefined, not \"+typeof e.root);return(e.dir?e.dir+t.sep:\"\")+(e.base||\"\")}}),define(\"skylark-langx-paths/is-absolute\",[\"./paths\"],function(t){return t.isAbsolute=function(e){return 0<e.length&&e.charAt(0)===t.sep}}),define(\"skylark-langx-paths/join\",[\"./paths\",\"./normalize\"],function(s,o){return s.join=function(){for(var e=[],t=0;t<arguments.length;t++)e[+t]=arguments[t];for(var r=[],n=0;n<e.length;n++){var i=e[n];if(\"string\"!=typeof i)throw new TypeError(\"Invalid argument type to segs.join: \"+typeof i);\"\"!==i&&r.push(i)}return o(r.join(s.sep))}}),define(\"skylark-langx-constructs/constructs\",[\"skylark-langx-ns\"],function(e){return e.attach(\"langx.constructs\",{})}),define(\"skylark-langx-constructs/inherit\",[\"./constructs\"],function(e){return e.inherit=function(e,t){if(\"function\"!=typeof t&&t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object.setPrototypeOf(e,t)}}),define(\"skylark-langx-objects/objects\",[\"skylark-langx-ns\",\"skylark-langx-types\"],function(e,t){return e.attach(\"langx.objects\",{attach:e.attach})}),define(\"skylark-langx-objects/all-keys\",[\"skylark-langx-types\",\"./objects\"],function(n,e){return e.allKeys=function(e){if(!n.isObject(e))return[];var t,r=[];for(t in e)r.push(t);return r}}),define(\"skylark-langx-objects/assign\",[\"skylark-langx-types\",\"./objects\"],function(e,t){return t.assign=Object.assign}),define(\"skylark-langx-objects/to-key\",[\"skylark-langx-types\",\"./objects\"],function(e,t){const r=e.isSymbol,n=e.isString;return t.toKey=function(e){var t;return n(e)||r(e)?e:\"0\"==(t=\"\"+e)&&1/e==-1/0?\"-0\":t}}),define(\"skylark-langx-objects/is-key\",[\"skylark-langx-types\",\"./objects\"],function(e,t){const n=e.isSymbol,i=e.isArray,s=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,o=/^\\w*$/;return t.isKey=function(e,t){var r;return!i(e)&&(!(\"number\"!=(r=typeof e)&&\"boolean\"!=r&&null!=e&&!n(e))||o.test(e)||!s.test(e)||null!=t&&e in Object(t))}}),define(\"skylark-langx-objects/_cast_path\",[\"skylark-langx-types\",\"./objects\",\"./is-key\"],function(r,e,n){const i=\".\".charCodeAt(0),o=/\\\\(\\\\)?/g,a=RegExp(\"[^.[\\\\]]+|\\\\[(?:([^\\\"'][^[]*)|([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2)\\\\]|(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))\",\"g\");return function(e,t){if(r.isArray(e))return e;if(n(e,t))return[e];{t=e;const s=[];return t.charCodeAt(0)===i&&s.push(\"\"),t.replace(a,(e,t,r,n)=>{let i=e;r?i=n.replace(o,\"$1\"):t&&(i=t.trim()),s.push(i)}),s}}}),define(\"skylark-langx-objects/get\",[\"skylark-langx-types\",\"./objects\",\"./to-key\",\"./_cast_path\"],function(e,t,i,s){return t.get=function(e,t,r){return void 0===(e=null==e?void 0:function(e,t){let r=0;for(var n=(t=s(t,e)).length;null!=e&&r<n;)e=e[i(t[r++])];return r&&r==n?e:void 0}(e,t))?r:e}}),define(\"skylark-langx-objects/base-at\",[\"./objects\",\"./get\"],function(e,o){return e.baseAt=function(e,t){let r=-1;for(var n=t.length,i=new Array(n),s=null==e;++r<n;)i[r]=s?void 0:o(e,t[r]);return i}}),define(\"skylark-langx-objects/clone\",[\"skylark-langx-types\",\"./objects\"],function(e,t){var o=e.isPlainObject,a=e.isArray;return t.clone=function e(t,r){if(null==t)n=t;else if(r&&t.clone)n=t.clone();else if(a(t))for(var n=[],i=0;i<t.length;i++)n.push(e(t[i]));else if(o(t))for(var s in n={},t)n[s]=e(t[s]);else n=t;return n}}),define(\"skylark-langx-objects/defaults\",[\"./objects\",\"./all-keys\"],function(e,t){return e.defaults=(l=t,c=!0,function(e){var t=arguments.length;if(c&&(e=Object(e)),!(t<2||null==e))for(var r=1;r<t;r++)for(var n=arguments[r],i=l(n),s=i.length,o=0;o<s;o++){var a=i[o];c&&void 0!==e[a]||(e[a]=n[a])}return e});var l,c}),define(\"skylark-langx-objects/each\",[\"./objects\"],function(e){return e.each=function(e,t,r){var n,i,s,o;if(e)if(void 0===(n=e.length)){for(i in e)if(e.hasOwnProperty(i)&&(o=e[i],!1===(r?t.call(o,o,i):t.call(o,i,o))))break}else for(s=0;s<n&&(o=e[s],!1!==(r?t.call(o,o,s):t.call(o,s,o)));s++);return this}}),define(\"skylark-langx-objects/_mixin\",[\"skylark-langx-types\",\"./objects\"],function(e,t){var o=e.isPlainObject;return function e(t,r,n,i){for(var s in r)i&&void 0!==t[s]||(n&&o(r[s])?(o(t[s])||(t[s]={}),e(t[s],r[s],n,i)):void 0!==r[s]&&(t[s]=r[s]));return t}}),define(\"skylark-langx-objects/_parse_mixin_args\",[\"skylark-langx-types\",\"./objects\"],function(e,t){var i=Array.prototype.slice,s=e.isBoolean;return function(e){var t=i.call(arguments,0),r=t.shift(),n=!1;return s(t[t.length-1])&&(n=t.pop()),{target:r,sources:t,deep:n}}}),define(\"skylark-langx-objects/mixin\",[\"skylark-langx-types\",\"./objects\",\"./_mixin\",\"./_parse_mixin_args\"],function(e,t,r,n){return t.mixin=function(){var t=n.apply(this,arguments);return t.sources.forEach(function(e){r(t.target,e,t.deep,!1)}),t.target}}),define(\"skylark-langx-objects/extend\",[\"./objects\",\"./mixin\"],function(e,n){var i=Array.prototype.slice;return e.extend=function(t){var r,e=i.call(arguments,1);return\"boolean\"==typeof t&&(r=t,t=e.shift()),0==e.length&&(e=[t],t=this),e.forEach(function(e){n(t,e,r)}),t}}),define(\"skylark-langx-objects/for-each\",[\"./objects\",\"./each\"],function(e,r){return e.forEach=function(e,t){e&&(e.forEach?e.forEach(t):r(e,t,!0))}}),define(\"skylark-langx-objects/has\",[\"skylark-langx-types\",\"./objects\"],function(s,e){var o=Object.prototype.hasOwnProperty;return e.has=function(e,t){if(!s.isArray(t))return null!=e&&o.call(e,t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(null==e||!o.call(e,i))return!1;e=e[i]}return!!r}}),define(\"skylark-langx-objects/includes\",[\"./objects\"],function(e){return e.includes=function(e,t,r,n){return e=isArrayLike(e)?e:values(e),r=r&&!n?toInteger(r):0,n=e.length,r<0&&(r=nativeMax(n+r,0)),isString(e)?r<=n&&-1<e.indexOf(t,r):!!n&&-1<baseIndexOf(e,t,r)}}),define(\"skylark-langx-objects/is-equal\",[\"skylark-langx-types\",\"./objects\"],function(e,t){var u,s,h=e.isFunction,f=\"undefined\"!=typeof Symbol?Symbol.prototype:null;return u=function(e,t,r,n){var i;return e===t?0!==e||1/e==1/t:null!=e&&null!=t&&(e!=e?t!=t:(\"function\"==(i=typeof e)||\"object\"==i||\"object\"==typeof t)&&s(e,t,r,n))},s=function(e,t,r,n){var i=toString.call(e);if(i!==toString.call(t))return!1;switch(i){case\"[object RegExp]\":case\"[object String]\":return\"\"+e==\"\"+t;case\"[object Number]\":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case\"[object Date]\":case\"[object Boolean]\":return+e==+t;case\"[object Symbol]\":return f.valueOf.call(e)===f.valueOf.call(t)}i=\"[object Array]\"===i;if(!i){if(\"object\"!=typeof e||\"object\"!=typeof t)return!1;var s=e.constructor,o=t.constructor;if(s!==o&&!(h(s)&&s instanceof s&&h(o)&&o instanceof o)&&\"constructor\"in e&&\"constructor\"in t)return!1}n=n||[];for(var a=(r=r||[]).length;a--;)if(r[a]===e)return n[a]===t;if(r.push(e),n.push(t),i){if((a=e.length)!==t.length)return!1;for(;a--;)if(!u(e[a],t[a],r,n))return!1}else{var l,c=Object.keys(e),a=c.length;if(Object.keys(t).length!==a)return!1;for(;a--;)if(void 0===t[l=c[a]]||!u(e[l],t[l],r,n))return!1}return r.pop(),n.pop(),!0},t.isEqual=function(e,t){return u(e,t)}}),define(\"skylark-langx-objects/keys\",[\"skylark-langx-types\",\"./objects\",\"./has\"],function(n,e,i){return e.keys=function(e){if(!n.isObject(e))return[];var t,r=[];for(t in e)i(e,t)&&r.push(t);return r}}),define(\"skylark-langx-objects/is-match\",[\"skylark-langx-types\",\"./objects\",\"./keys\"],function(e,t,r){return t.isMatch=function(e,t){var r=(void 0)(t),n=r.length;if(null==e)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}}),define(\"skylark-langx-objects/omit\",[\"./objects\",\"./mixin\"],function(e,o){return e.omit=function(e,t,r){if(!e)return null;for(var n=o({},e),i=1;i<arguments.length;i++){var s=arguments[i];s in e&&delete n[s]}return n}}),define(\"skylark-langx-objects/pick\",[\"./objects\"],function(e){return e.pick=function(e,t,r){if(!e)return null;for(var n={},i=1;i<arguments.length;i++){var s=arguments[i];s in e&&(n[s]=e[s])}return n}}),define(\"skylark-langx-objects/remove-items\",[\"skylark-langx-types\",\"./objects\"],function(i,e){return e.removeItem=function(e,t){if(i.isArray(e)){var r=e.indexOf(t);-1!=r&&e.splice(r,1)}else if(i.isPlainObject(e))for(var n in e)if(e[n]==t){delete e[n];break}return this}}),define(\"skylark-langx-objects/result\",[\"skylark-langx-types\",\"./objects\",\"./to-key\",\"./_cast_path\"],function(e,t,o,a){e.isArray;var l=e.isFunction;return t.result=function(t,r,n){let i=-1,s=(r=a(r,t)).length;for(s||(s=1,t=void 0);++i<s;){let e=null==t?void 0:t[o(r[i])];void 0===e&&(i=s,e=n),t=l(e)?e.call(t):e}return t}}),define(\"skylark-langx-objects/safe-mixin\",[\"./objects\",\"./_mixin\",\"./_parse_mixin_args\"],function(e,r,n){return e.safeMixin=function(){var t=n.apply(this,arguments);return t.sources.forEach(function(e){r(t.target,e,t.deep,!0)}),t.target}}),define(\"skylark-langx-objects/scall\",[\"./objects\"],function(e){const s=Array.prototype.slice;return e.scall=function(e,t,r,n){var i;if(e&&e[t])return i=s.call(arguments,2),e[t].apply(e,i)}}),define(\"skylark-langx-objects/is-index\",[\"skylark-langx-types\",\"./objects\"],function(e,t){const n=/^(?:0|[1-9]\\d*)$/;return t.isIndex=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&(\"number\"==r||\"symbol\"!=r&&n.test(e))&&-1<e&&e%1==0&&e<t}}),define(\"skylark-langx-objects/set\",[\"skylark-langx-types\",\"./objects\",\"./_cast_path\",\"./is-index\",\"./to-key\"],function(u,e,h,f,d){return e.set=function(e,t,r){if(null!=e){var n=t,i=r,s=void 0;if(u.isObject(e)){var o=(n=h(n,e)).length,a=o-1;let t=-1,r=e;for(;null!=r&&++t<o;){var l,c=d(n[t]);let e=i;t!=a&&(l=r[c],void 0===(e=s?s(l,c,r):void 0))&&(e=u.isObject(l)?l:f(n[t+1])?[]:{}),r[c]=e,r=r[c]}}}return e}}),define(\"skylark-langx-objects/shadow\",[\"./objects\"],function(e){return e.shadow=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}}),define(\"skylark-langx-objects/unset\",[\"skylark-langx-types\",\"./objects\",\"./set\"],function(e,t,r){return t.unset=function(e,t){return null==e||r(e,t,void 0)}}),define(\"skylark-langx-objects/values\",[\"skylark-langx-types\",\"./objects\",\"./all-keys\"],function(e,t,s){return t.values=function(e){for(var t=s(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}}),define(\"skylark-langx-objects/main\",[\"./objects\",\"./all-keys\",\"./assign\",\"./base-at\",\"./clone\",\"./defaults\",\"./each\",\"./extend\",\"./for-each\",\"./get\",\"./has\",\"./includes\",\"./is-equal\",\"./is-key\",\"./is-match\",\"./keys\",\"./mixin\",\"./omit\",\"./pick\",\"./remove-items\",\"./result\",\"./safe-mixin\",\"./scall\",\"./set\",\"./shadow\",\"./to-key\",\"./unset\",\"./values\"],function(e){return e}),define(\"skylark-langx-objects\",[\"skylark-langx-objects/main\"],function(e){return e}),define(\"skylark-langx-arrays/arrays\",[\"skylark-langx-ns\"],function(e){return e.attach(\"langx.arrays\")}),define(\"skylark-langx-arrays/base-find-index\",[\"./arrays\"],function(e){return e.baseFindIndex=function(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}}),define(\"skylark-langx-arrays/base-indexof\",[\"./arrays\",\"./base-find-index\"],function(e,s){function o(e){return e!=e}return e.baseIndexOf=function(e,t,r){if(t!=t)return s(e,o,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}}),define(\"skylark-langx-arrays/filter\",[\"./arrays\"],function(e){var r=Array.prototype.filter;return e.filter=function(e,t){return r.call(e,t)}}),define(\"skylark-langx-arrays/compact\",[\"./arrays\",\"./filter\"],function(e,t){return e.compact=function(e){return t(e,function(e){return null!=e})}}),define(\"skylark-langx-arrays/in-array\",[\"./arrays\"],function(e){return e.inArray=function(e,t){if(t){var r;if(t.indexOf)return t.indexOf(e);for(r=t.length;r--;)if(t[r]===e)return r}return-1}}),define(\"skylark-langx-arrays/contains\",[\"./arrays\",\"./in-array\"],function(e,r){return e.contains=function(e,t){return r(t,e)}}),define(\"skylark-langx-funcs/rest-arguments\",[\"./funcs\"],function(e){return e.restArguments=function(i,s){return s=null==s?i.length-1:+s,function(){for(var e=Math.max(arguments.length-s,0),t=Array(e),r=0;r<e;r++)t[r]=arguments[r+s];switch(s){case 0:return i.call(this,t);case 1:return i.call(this,arguments[0],t);case 2:return i.call(this,arguments[0],arguments[1],t)}for(var n=Array(s+1),r=0;r<s;r++)n[r]=arguments[r];return n[s]=t,i.apply(this,n)}}}),define(\"skylark-langx-funcs/bind-all\",[\"./funcs\",\"./rest-arguments\"],function(e,t){return e.bindAll=t(function(e,t){var r=t.length;if(r<1)throw new Error(\"bindAll must be passed function names\");for(;r--;){var n=t[r];e[n]=e[n].bind(e)}})}),define(\"skylark-langx-funcs/debounce\",[\"./funcs\",\"./defer\"],function(e,l){return e.debounce=function(r,n,i){function e(){var e=this,t=arguments;return a(),s=setTimeout(function(){s=null,i?o=l(r,t,e):r.apply(e,t)},n),{cancel:a}}var s,o,a=e.cancel=function(){s&&clearTimeout(s),o&&o.cancel(),o=s=void 0};return e}}),define(\"skylark-langx-funcs/delegate\",[\"skylark-langx-objects\",\"./funcs\"],function(e,t){var r=e.mixin;function n(){}return t.delegate=function(e,t){n.prototype=e;e=new n;return n.prototype=null,t&&r(e,t),e}}),define(\"skylark-langx-funcs/loop\",[\"./funcs\"],function(e){function t(e){this.callback=e,this.running=!1,this.id=-1}return t.prototype.start=function(){var t;this.running||(this.running=!0,t=this,function e(){t.callback(),t.running&&(t.id=requestAnimationFrame(e))}())},t.prototype.stop=function(){this.running=!1,cancelAnimationFrame(this.id)},e.loop=function(e){return new t(e)}}),define(\"skylark-langx-funcs/negate\",[\"./funcs\"],function(e){return e.negate=function(t){if(\"function\"!=typeof t)throw new TypeError(\"Expected a function\");return function(...e){return!t.apply(this,e)}}}),define(\"skylark-langx-funcs/proxy\",[\"skylark-langx-types\",\"./funcs\"],function(e,t){var n=Array.prototype.slice,i=e.isFunction,s=e.isString;function o(e,t){var r=2 in arguments&&n.call(arguments,2);if(i(e))return function(){return e.apply(t,r?r.concat(n.call(arguments)):arguments)};if(s(t))return r?(r.unshift(e[t],e),o.apply(null,r)):o(e[t],e);throw new TypeError(\"expected function\")}return t.bind=t.proxy=o}),define(\"skylark-langx-funcs/template\",[\"skylark-langx-objects\",\"./funcs\",\"./proxy\"],function(n,e,i){Array.prototype.slice;var l={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},c=/(.)^/,u={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\t\":\"t\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},h=/\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;function t(s,e){e=n.defaults({},e,l);var t,r=RegExp([(e.escape||c).source,(e.interpolate||c).source,(e.evaluate||c).source].join(\"|\")+\"|$\",\"g\"),o=0,a=\"__p+='\";s.replace(r,function(e,t,r,n,i){return a+=s.slice(o,i).replace(h,function(e){return\"\\\\\"+u[e]}),t&&(a+=\"'+\\n((__t=(\"+t+\"))==null?'':_.escape(__t))+\\n'\"),r&&(a+=\"'+\\n((__t=(\"+r+\"))==null?'':__t)+\\n'\"),n&&(a+=\"';\\n\"+n+\"\\n__p+='\"),o=i+e.length,e}),a+=\"';\\n\",a=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+(a=e.variable?a:\"with(obj||{}){\\n\"+a+\"}\\n\")+\"return __p;\\n\";try{t=new Function(e.variable||\"obj\",\"_\",a)}catch(e){throw e.source=a,e}r=i(function(e){return t.call(this,e,this)},this),e=e.variable||\"obj\";return r.source=\"function(\"+e+\"){\\n\"+a+\"}\",r}return t.templateSettings=e.templateSettings=l,e.template=t}),define(\"skylark-langx-funcs/throttle\",[\"./funcs\"],function(e){return e.throttle=function(r,n){let i=window.performance.now();return function(...e){var t=window.performance.now();t-i>=n&&(r(...e),i=t)}}}),define(\"skylark-langx-funcs/main\",[\"./funcs\",\"./bind-all\",\"./debounce\",\"./defer\",\"./delegate\",\"./loop\",\"./negate\",\"./proxy\",\"./rest-arguments\",\"./template\",\"./throttle\"],function(e){return e}),define(\"skylark-langx-funcs\",[\"skylark-langx-funcs/main\"],function(e){return e}),define(\"skylark-langx-arrays/flatten\",[\"skylark-langx-types\",\"./arrays\"],function(s,e){return e.flatten=function(e){if(s.isArrayLike(e)){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(s.isArrayLike(n))for(var i=0;i<n.length;i++)t.push(n[i]);else t.push(n)}return t}return e}}),define(\"skylark-langx-arrays/difference\",[\"skylark-langx-funcs\",\"./arrays\",\"./flatten\",\"./filter\",\"./contains\"],function(e,t,r,n,i){e=e.restArguments(function(e,t){return t=r(t,!0,!0),n(e,function(e){return!i(t,e)})});return t.difference=e}),define(\"skylark-langx-arrays/find\",[\"./arrays\"],function(e){var r=Array.prototype.find;return e.find=function(e,t){return r.call(e,t)}}),define(\"skylark-langx-arrays/first\",[\"./arrays\"],function(e){return e.first=function(e,t){return t?e.slice(0,t):e[0]}}),define(\"skylark-langx-arrays/grep\",[\"skylark-langx-objects\",\"./arrays\"],function(t,e){return e.grep=function(e,r){var n=[];return t.each(e,function(e,t){r(t,e)&&n.push(t)}),n}}),define(\"skylark-langx-arrays/indexof\",[\"./arrays\"],function(e){return e.indexOf=function(e,t){return e.indexOf(t)}}),define(\"skylark-langx-arrays/last\",[\"./arrays\"],function(e){return e.last=function(e){return e[e.length-1]}}),define(\"skylark-langx-arrays/make-array\",[\"skylark-langx-types\",\"./arrays\"],function(n,e){return e.makeArray=function(e,t,r){return n.isArrayLike(e)?(r||[]).concat(Array.prototype.slice.call(e,t||0)):[e]}}),define(\"skylark-langx-arrays/map\",[\"skylark-langx-types\",\"./arrays\",\"./flatten\"],function(o,e,a){return e.map=function(e,t){var r,n,i,s=[];if(o.isArrayLike(e))for(n=0;n<e.length;n++)null!=(r=t.call(e[n],e[n],n))&&s.push(r);else for(i in e)null!=(r=t.call(e[i],e[i],i))&&s.push(r);return a(s)}}),define(\"skylark-langx-arrays/merge\",[\"./arrays\"],function(e){return e.merge=function(e,t){var r=t.length,n=e.length,i=0;if(\"number\"==typeof r)for(;i<r;i++)e[n++]=t[i];else for(;void 0!==t[i];)e[n++]=t[i++];return e.length=n,e}}),define(\"skylark-langx-arrays/pull-at\",[\"skylark-langx-types\",\"skylark-langx-objects\",\"./arrays\"],function(e,n,t){return t.pullAt=function(t,...r){null!=t&&t.length;var e=n.baseAt(t,r);r.sort(function(e,t){return e-t});for(let e=r.length-1;0<=e;e--)t.slice(r[e],1);return e}}),define(\"skylark-langx-arrays/reduce\",[\"./arrays\"],function(e){return e.reduce=function(e,t,r){return Array.prototype.reduce.call(e,t,r)}}),define(\"skylark-langx-arrays/uniq\",[\"./arrays\",\"./filter\"],function(e,t){return e.uniq=function(r){return t(r,function(e,t){return r.indexOf(e)==t})}}),define(\"skylark-langx-arrays/without\",[\"skylark-langx-funcs\",\"./arrays\",\"./difference\"],function(e,t,r){e=e.restArguments(function(e,t){return r(e,t)});return t.without=e}),define(\"skylark-langx-arrays/main\",[\"./arrays\",\"./base-find-index\",\"./base-indexof\",\"./compact\",\"./contains\",\"./difference\",\"./filter\",\"./find\",\"./first\",\"./flatten\",\"./grep\",\"./in-array\",\"./indexof\",\"./last\",\"./make-array\",\"./map\",\"./merge\",\"./pull-at\",\"./reduce\",\"./uniq\",\"./without\"],function(e){return e}),define(\"skylark-langx-arrays\",[\"skylark-langx-arrays/main\"],function(e){return e}),define(\"skylark-langx-constructs/klass\",[\"skylark-langx-ns\",\"skylark-langx-types\",\"skylark-langx-objects\",\"skylark-langx-arrays\",\"./constructs\",\"./inherit\"],function(e,c,t,r,n,u){var h=r.uniq,f=t.has,d=t.mixin,y=c.isArray,p=c.isDefined;function g(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return n.klass=function n(e,t,r,i){y(t)&&(i=r,r=t,t=null),t=t||Object,p(r)&&!y(r)&&(i=r,r=!1);var s,o,a=t,l=(r&&(s=a,o=[],r.forEach(function(e){if(f(e,\"__mixins__\"))throw new Error(\"nested mixins\");for(var t=[];e;)t.unshift(e),e=e.superclass;o=o.concat(t)}),r=0<(o=(o=h(o)).filter(function(e){for(var t=s;t;){if(e===t)return!1;if(f(t,\"__mixins__\"))for(var r=t.__mixins__,n=0;n<r.length;n++)if(r[n]===e)return!1;t=t.superclass}return!0})).length&&o),r&&(a=function(e,t){for(var r=e,n=0;n<t.length;n++){var i=new Function;u(i,r),i.superclass=null,d(i.prototype,t[n].prototype),i.prototype.__mixin__=t[n],r=i}return r}(a,r)),e.klassName||\"\"),l=new Function(\"return function \"+l+\"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}\")();return u(l,a),l.superclass=t,l._constructor||(l._constructor=g),r&&(l.__mixins__=r),l.partial||(l.partial=function(e,t){var r,n,i=this,s=e,e=t,o=i.prototype,a=i.superclass.prototype,l=e&&e.noOverrided;for(r in e&&e.overrides,s)\"constructor\"!==r&&(n=s[r],\"function\"==typeof s[r]?o[r]=n._constructor||l||\"function\"!=typeof a[r]?n:function(r,n){return function(){var e=this.overrided,t=(this.overrided=n,r.apply(this,arguments));return this.overrided=e,t}}(n,a[r]):c.isPlainObject(n)&&null!==n&&n.get?Object.defineProperty(o,r,n):o[r]=n);return i}),l.inherit||(l.inherit=function(e,t,r){return n(e,this,t,r)}),l.partial(e,i),l}}),define(\"skylark-langx-constructs/main\",[\"./constructs\",\"./inherit\",\"./klass\"],function(e){return e}),define(\"skylark-langx-constructs\",[\"skylark-langx-constructs/main\"],function(e){return e}),define(\"skylark-langx-paths/path\",[\"skylark-langx-types\",\"skylark-langx-constructs\",\"./paths\"],function(t,e,r){var a=e.klass({_construct:function(){var e=this._={segments:null,hasLeading:!1,hasTrailing:!1};1==arguments.length&&t.isString(arguments[0])?this._parse(arguments[0]):t.isArray(arguments[0])&&(e.segments=arguments[0],e.hasLeading=arguments[1]||!1,e.hasTrailing=arguments[2]||!1,this._canonicalize())},_canonicalize:function(){for(var e,t=this._.segments,r=0;r<t.length;r++)if(\".\"==t[r]||\"..\"==t[r]){e=!0;break}if(e){for(var n=[],r=0;r<t.length;r++)\"..\"==t[r]?0==n.length?this.hasLeading||n.push(t[r]):\"..\"==n[n.length-1]?n.push(\"..\"):n.pop():\".\"==t[r]&&1!=t.length||n.push(t[r]);n.length!=t.length&&(this._.segments=n)}},_length:function(e){return this._.segments.length},_parse:function(e){var t=this._,r=(e=e||\".\").split(\"/\");\"/\"==e.charAt(0)&&(t.hasLeading=!0,r.shift()),\"/\"==e.charAt(e.length-1)&&(t.hasTrailing=!0,r.pop()),t.segments=r,t.path=e,this._canonicalize()},append:function(e){return t.isString(e)?this.appendPathStr(e):this.appendPath(e)},appendPath:function(e){var t,r;return e.isAbsolute()?e:(r=this.segments,t=e.segments,r=r.concat(t),new a(r,this.hasLeading,e.hasTrailing))},appendPathStr:function(e){return e=new a(e||\"\"),this.appendPath(e)},clone:function(){return new a(this.segments,this.hasLeading,this.hasTrailing)},endsWith:function(e){for(var t=this.segments,r=new a(e).segments;0<r.length&&0<t.length;)if(r.pop()!=t.pop())return!1;return!0},equals:function(e){var t=this._.segments,r=e._.segments;if(t.length!=r.length)return!1;for(var n=0;n<t.length;n++)if(r[n]!=t[n])return!1;return!0},firstSegment:function(e){return this._.segments[e||0]},getExtension:function(){var e=this._.extension,t=this._.path;return e=textension?e:this._.extension=t.substr(t.lastIndexOf(\".\")+1)},getSegments:function(){return this.segments},getParentPath:function(){var e,t=this._.parentPath;return t||((e=this.segments).pop(),t=this._.parentPath=new a(e,this.hasLeading)),t},getRoot:function(){},isAbsolute:function(){return this.hasLeading},lastSegment:function(){var e=this._.segments;return e[e.length-1]},matchingFirstSegments:function(e){for(var t=this.segments,r=e.segments,n=Math.min(t.length,r.length),i=0,s=0;s<n;s++){if(t[s]!=r[s])return i;i++}return i},normalize:function(){},removeFirstSegments:function(e){var t=this._.segments,r=this._.hasLeading;return hasTrailing=this._.hasTrailing,new a(t.slice(e,t.length),r,hasTrailing)},removeLastSegments:function(e){var t=this._.segments,r=this._.hasLeading;return hasTrailing=this._.hasTrailing,new a(t.slice(0,t.length-(e=e||1)),r,hasTrailing)},removeMatchingFirstSegments:function(e){e=this.matchingFirstSegments(e);return this.removeFirstSegments(e)},removeMatchingLastSegments:function(e){var t=this.matchingFirstSegments(anotherPath);return this.removeLastSegments(t)},removeRelative:function(){var e=this.segments;return 0<e.length&&\".\"==e[1]?this.removeFirstSegments(1):this},relativeTo:function(e,t){\"string\"==typeof e&&(e=new a(e));var r=this.segments;if(this.isAbsolute())return this;var n=e.segments,e=this.matchingFirstSegments(e),n=n.length,i=(t&&(n-=1),n-e);if(0==i+r.length-e)return a.EMPTY;for(var s=[],o=0;o<i;o++)s.push(\"..\");for(o=e;o<r.length;o++)s.push(r[o]);return new a(s,!1,this.hasTrailing)},segment:function(e){var t=this._.segments;return t.length<e?null:t[e]},startsWith:function(e){var t=this.matchingFirstSegments(e);return e._length()==t},toString:function(){var e=[],t=this._.segments;this.hasLeading&&e.push(\"/\");for(var r=0;r<t.length;r++)0<r&&e.push(\"/\"),e.push(t[r]);return this.hasTrailing&&e.push(\"/\"),e.join(\"\")},hasLeading:{get:function(){return this._.hasLeading}},hasTrailing:{get:function(){return this._.hasTrailing}}});return a.EMPTY=new a(\"\"),r.Path=a}),define(\"skylark-langx-paths/resolve\",[\"./paths\",\"./normalize\"],function(o,a){return o.resolve=function(){for(var e=[],t=0;t<arguments.length;t++)e[+t]=arguments[t];for(var r=[],n=0;n<e.length;n++){var i=e[n];if(\"string\"!=typeof i)throw new TypeError(\"Invalid argument type to paths.join: \"+typeof i);\"\"!==i&&(r=i.charAt(0)===o.sep?[]:r).push(i)}var s=a(r.join(o.sep));return 1<s.length&&s.charAt(s.length-1)===o.sep?s.substr(0,s.length-1):s}}),define(\"skylark-langx-paths/relative\",[\"./paths\",\"./resolve\"],function(l,c){return l.relative=function(e,t){e=c(e),t=c(t);for(var r=e.split(l.sep),n=t.split(l.sep),i=(n.shift(),r.shift(),0),e=[],s=0;s<r.length;s++){var o=r[s];if(o!==n[s]){i=r.length-s;break}}e=n.slice(s),(i=1===r.length&&\"\"===r[0]?0:i)>r.length&&(i=r.length);var a=\"\";for(s=0;s<i;s++)a+=\"../\";return a=1<(a+=e.join(l.sep)).length&&a.charAt(a.length-1)===l.sep?a.substr(0,a.length-1):a}}),define(\"skylark-langx-paths/main\",[\"./paths\",\"./basename\",\"./dirname\",\"./extname\",\"./format\",\"./is-absolute\",\"./join\",\"./normalize\",\"./path\",\"./relative\",\"./resolve\"],function(e){return e}),define(\"skylark-langx-paths\",[\"skylark-langx-paths/main\"],function(e){return e}),define(\"skylark-io-files/file-type\",[\"./files\"],function(e){\"use strict\";var t,r;return(r=t=t||{})[r.FILE=32768]=\"FILE\",r[r.DIRECTORY=16384]=\"DIRECTORY\",r[r.SYMLINK=40960]=\"SYMLINK\",e.FileType=t}),define(\"skylark-io-files/stats\",[\"skylark-langx-binary/buffer\",\"./files\",\"./file-type\"],function(t,e,l){\"use strict\";return e.Stats=class s{constructor(e,t,r,n,i,s,o){this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.fileData=null,this.size=t;let a=0;\"number\"!=typeof n&&(n=a=Date.now()),\"number\"!=typeof i&&(i=a=a||Date.now()),\"number\"!=typeof s&&(s=a=a||Date.now()),\"number\"!=typeof o&&(o=a=a||Date.now()),this.atimeMs=n,this.ctimeMs=s,this.mtimeMs=i,this.birthtimeMs=o,r?this.mode=r:e===l.FILE?this.mode=420:(l.DIRECTORY,this.mode=511),this.blocks=Math.ceil(t/512),this.mode<4096&&(this.mode|=e)}static fromBuffer(e){var t=e.readUInt32LE(0),r=e.readUInt32LE(4),n=e.readDoubleLE(8),i=e.readDoubleLE(16),e=e.readDoubleLE(24);return new s(61440&r,t,4095&r,n,i,e)}static clone(e){return new s(61440&e.mode,e.size,4095&e.mode,e.atimeMs,e.mtimeMs,e.ctimeMs,e.birthtimeMs)}get atime(){return new Date(this.atimeMs)}get mtime(){return new Date(this.mtimeMs)}get ctime(){return new Date(this.ctimeMs)}get birthtime(){return new Date(this.birthtimeMs)}toBuffer(){var e=t.alloc(32);return e.writeUInt32LE(this.size,0),e.writeUInt32LE(this.mode,4),e.writeDoubleLE(this.atime.getTime(),8),e.writeDoubleLE(this.mtime.getTime(),16),e.writeDoubleLE(this.ctime.getTime(),24),e}isFile(){return(61440&this.mode)===l.FILE}isDirectory(){return(61440&this.mode)===l.DIRECTORY}isSymbolicLink(){return(61440&this.mode)===l.SYMLINK}chmod(e){this.mode=61440&this.mode|e}isSocket(){return!1}isBlockDevice(){return!1}isCharacterDevice(){return!1}isFIFO(){return!1}}}),define(\"skylark-io-files/file-system\",[\"skylark-langx-funcs/defer\",\"skylark-langx-binary/buffer\",\"skylark-langx-paths\",\"./files\",\"./error-codes\",\"./file-error\",\"./file-flag\",\"./stats\"],function(i,d,t,e,h,f,o,r){\"use strict\";let s=function(e,t){return e};function y(e,t){if(\"function\"!=typeof e)throw new Error(\"Callback must be a function.\");const n=s(e,t);switch(t){case 1:return function(e){i(function(){return n(e)})};case 2:return function(e,t){i(function(){return n(e,t)})};case 3:return function(e,t,r){i(function(){return n(e,t,r)})};default:throw new Error(\"Invalid invocation of wrapCb.\")}}function a(e){if(e)return e;throw new f(h.EIO,\"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)\")}function l(e,t){switch(typeof e){case\"number\":return e;case\"string\":var r=parseInt(e,8);return isNaN(r)?t:r;default:return t}}function c(e){if(e instanceof Date)return e;if(\"number\"==typeof e)return new Date(1e3*e);throw new f(h.EINVAL,\"Invalid time.\")}function u(e){if(0<=e.indexOf(\"\\0\"))throw new f(h.EINVAL,\"Path must be a string without null bytes.\");if(\"\"===e)throw new f(h.EINVAL,\"Path must not be empty.\");return t.resolve(e)}function p(e,t,r,n){switch(null===e?\"null\":typeof e){case\"object\":return{encoding:void 0!==e.encoding?e.encoding:t,flag:void 0!==e.flag?e.flag:r,mode:l(e.mode,n)};case\"string\":return{encoding:e,flag:r,mode:n};case\"null\":case\"undefined\":case\"function\":return{encoding:t,flag:r,mode:n};default:throw new TypeError(`\"options\" must be a string or an object, got ${typeof e} instead.`)}}function g(){}return e.FileSystem=class{constructor(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100}initialize(e){if(e.constructor.isAvailable())return this.root=e;throw new f(h.EINVAL,\"Tried to instantiate BrowserFS with an unavailable file system.\")}_toUnixTimestamp(e){if(\"number\"==typeof e)return e;if(e instanceof Date)return e.getTime()/1e3;throw new Error(\"Cannot parse time: \"+e)}getRootFS(){return this.root||null}rename(e,t,r=g){r=y(r,1);try{a(this.root).rename(u(e),u(t),r)}catch(e){r(e)}}renameSync(e,t){a(this.root).renameSync(u(e),u(t))}exists(e,t=g){t=y(t,1);try{return a(this.root).exists(u(e),t)}catch(e){return t(!1)}}existsSync(e){try{return a(this.root).existsSync(u(e))}catch(e){return!1}}stat(e,t=g){t=y(t,2);try{return a(this.root).stat(u(e),!1,t)}catch(e){return t(e)}}statSync(e){return a(this.root).statSync(u(e),!1)}lstat(e,t=g){t=y(t,2);try{return a(this.root).stat(u(e),!0,t)}catch(e){return t(e)}}lstatSync(e){return a(this.root).statSync(u(e),!0)}truncate(e,t=0,r=g){let n=0;\"function\"==typeof t?r=t:\"number\"==typeof t&&(n=t);t=y(r,1);try{if(n<0)throw new f(h.EINVAL);return a(this.root).truncate(u(e),n,t)}catch(e){return t(e)}}truncateSync(e,t=0){if(t<0)throw new f(h.EINVAL);return a(this.root).truncateSync(u(e),t)}unlink(e,t=g){t=y(t,1);try{return a(this.root).unlink(u(e),t)}catch(e){return t(e)}}unlinkSync(e){return a(this.root).unlinkSync(u(e))}open(e,t,r,n=g){var i=l(r,420);const s=y(n=\"function\"==typeof r?r:n,2);try{a(this.root).open(u(e),o.getFileFlag(t),i,(e,t)=>{t?s(e,this.getFdForFile(t)):s(e)})}catch(e){s(e)}}openSync(e,t,r=420){return this.getFdForFile(a(this.root).openSync(u(e),o.getFileFlag(t),l(r,420)))}readFile(e,t={},r=g){var n=p(t,null,\"r\",null),t=y(r=\"function\"==typeof t?t:r,2);try{var i=o.getFileFlag(n.flag);return i.isReadable()?a(this.root).readFile(u(e),n.encoding,i,t):t(new f(h.EINVAL,\"Flag passed to readFile must allow for reading.\"))}catch(e){return t(e)}}readFileSync(e,t={}){var t=p(t,null,\"r\",null),r=o.getFileFlag(t.flag);if(r.isReadable())return a(this.root).readFileSync(u(e),t.encoding,r);throw new f(h.EINVAL,\"Flag passed to readFile must allow for reading.\")}writeFile(e,t,r={},n=g){var i=p(r,\"utf8\",\"w\",420),r=y(n=\"function\"==typeof r?r:n,1);try{var s=o.getFileFlag(i.flag);return s.isWriteable()?a(this.root).writeFile(u(e),t,i.encoding,s,i.mode,r):r(new f(h.EINVAL,\"Flag passed to writeFile must allow for writing.\"))}catch(e){return r(e)}}writeFileSync(e,t,r){var r=p(r,\"utf8\",\"w\",420),n=o.getFileFlag(r.flag);if(n.isWriteable())return a(this.root).writeFileSync(u(e),t,r.encoding,n,r.mode);throw new f(h.EINVAL,\"Flag passed to writeFile must allow for writing.\")}appendFile(e,t,r,n=g){var i=p(r,\"utf8\",\"a\",420),r=y(n=\"function\"==typeof r?r:n,1);try{var s=o.getFileFlag(i.flag);if(!s.isAppendable())return r(new f(h.EINVAL,\"Flag passed to appendFile must allow for appending.\"));a(this.root).appendFile(u(e),t,i.encoding,s,i.mode,r)}catch(e){r(e)}}appendFileSync(e,t,r){var r=p(r,\"utf8\",\"a\",420),n=o.getFileFlag(r.flag);if(n.isAppendable())return a(this.root).appendFileSync(u(e),t,r.encoding,n,r.mode);throw new f(h.EINVAL,\"Flag passed to appendFile must allow for appending.\")}fstat(e,t=g){t=y(t,2);try{this.fd2file(e).stat(t)}catch(e){t(e)}}fstatSync(e){return this.fd2file(e).statSync()}close(t,e=g){const r=y(e,1);try{this.fd2file(t).close(e=>{e||this.closeFd(t),r(e)})}catch(e){r(e)}}closeSync(e){this.fd2file(e).closeSync(),this.closeFd(e)}ftruncate(e,t,r=g){var n=\"number\"==typeof t?t:0,t=y(r=\"function\"==typeof t?t:r,1);try{var i=this.fd2file(e);if(n<0)throw new f(h.EINVAL);i.truncate(n,t)}catch(e){t(e)}}ftruncateSync(e,t=0){e=this.fd2file(e);if(t<0)throw new f(h.EINVAL);e.truncateSync(t)}fsync(e,t=g){t=y(t,1);try{this.fd2file(e).sync(t)}catch(e){t(e)}}fsyncSync(e){this.fd2file(e).syncSync()}fdatasync(e,t=g){t=y(t,1);try{this.fd2file(e).datasync(t)}catch(e){t(e)}}fdatasyncSync(e){this.fd2file(e).datasyncSync()}write(e,t,r,n,i,s=g){let o,a,l,c=null;if(\"string\"==typeof t){let e=\"utf8\";switch(typeof r){case\"function\":s=r;break;case\"number\":c=r,e=\"string\"==typeof n?n:\"utf8\",s=\"function\"==typeof i?i:s;break;default:return(s=\"function\"==typeof n?n:\"function\"==typeof i?i:s)(new f(h.EINVAL,\"Invalid arguments.\"))}o=d.from(t,e),a=0,l=o.length}else o=t,a=r,l=n,c=\"number\"==typeof i?i:null,s=\"function\"==typeof i?i:s;t=y(s,3);try{var u=this.fd2file(e);void 0!==c&&null!==c||(c=u.getPos()),u.write(o,a,l,c,t)}catch(e){t(e)}}writeSync(e,t,r,n,i){let s,o=0,a,l;\"string\"==typeof t?(l=\"number\"==typeof r?r:null,o=0,s=d.from(t,\"string\"==typeof n?n:\"utf8\"),a=s.length):(s=t,o=r,a=n,l=\"number\"==typeof i?i:null);t=this.fd2file(e);return void 0!==l&&null!==l||(l=t.getPos()),t.writeSync(s,o,a,l)}read(e,t,r,n,i,s=g){let o,a,l,c,u;if(\"number\"==typeof t){l=t,o=r;const f=n;s=\"function\"==typeof i?i:s,a=0,c=d.alloc(l),u=y((e,t,r)=>{if(e)return s(e);s(e,r.toString(f),t)},3)}else c=t,a=r,l=n,o=i,u=y(s,3);try{var h=this.fd2file(e);void 0!==o&&null!==o||(o=h.getPos()),h.read(c,a,l,o,u)}catch(e){u(e)}}readSync(e,t,r,n,i){let s=!1,o,a,l,c,u=\"utf8\";\"number\"==typeof t?(l=t,c=r,u=n,a=0,o=d.alloc(l),s=!0):(o=t,a=r,l=n,c=i);t=this.fd2file(e),void 0!==c&&null!==c||(c=t.getPos()),r=t.readSync(o,a,l,c);return s?[o.toString(u),r]:r}fchown(e,t,r,n=g){n=y(n,1);try{this.fd2file(e).chown(t,r,n)}catch(e){n(e)}}fchownSync(e,t,r){this.fd2file(e).chownSync(t,r)}fchmod(e,t,r){r=y(r,1);try{var n=\"string\"==typeof t?parseInt(t,8):t;this.fd2file(e).chmod(n,r)}catch(e){r(e)}}fchmodSync(e,t){t=\"string\"==typeof t?parseInt(t,8):t;this.fd2file(e).chmodSync(t)}futimes(e,t,r,n=g){n=y(n,1);try{var i=this.fd2file(e);\"number\"==typeof t&&(t=new Date(1e3*t)),\"number\"==typeof r&&(r=new Date(1e3*r)),i.utimes(t,r,n)}catch(e){n(e)}}futimesSync(e,t,r){this.fd2file(e).utimesSync(c(t),c(r))}rmdir(e,t=g){t=y(t,1);try{e=u(e),a(this.root).rmdir(e,t)}catch(e){t(e)}}rmdirSync(e){return e=u(e),a(this.root).rmdirSync(e)}mkdir(e,t,r=g){\"function\"==typeof t&&(r=t,t=511);r=y(r,1);try{e=u(e),a(this.root).mkdir(e,t,r)}catch(e){r(e)}}mkdirSync(e,t){a(this.root).mkdirSync(u(e),l(t,511))}readdir(e,t=g){t=y(t,2);try{e=u(e),a(this.root).readdir(e,t)}catch(e){t(e)}}readdirSync(e){return e=u(e),a(this.root).readdirSync(e)}link(e,t,r=g){r=y(r,1);try{e=u(e),t=u(t),a(this.root).link(e,t,r)}catch(e){r(e)}}linkSync(e,t){return e=u(e),t=u(t),a(this.root).linkSync(e,t)}symlink(e,t,r,n=g){var i=\"string\"==typeof r?r:\"file\",r=y(n=\"function\"==typeof r?r:n,1);try{if(\"file\"!==i&&\"dir\"!==i)return r(new f(h.EINVAL,\"Invalid type: \"+i));e=u(e),t=u(t),a(this.root).symlink(e,t,i,r)}catch(e){r(e)}}symlinkSync(e,t,r){if(r){if(\"file\"!==r&&\"dir\"!==r)throw new f(h.EINVAL,\"Invalid type: \"+r)}else r=\"file\";return e=u(e),t=u(t),a(this.root).symlinkSync(e,t,r)}readlink(e,t=g){t=y(t,2);try{e=u(e),a(this.root).readlink(e,t)}catch(e){t(e)}}readlinkSync(e){return e=u(e),a(this.root).readlinkSync(e)}chown(e,t,r,n=g){n=y(n,1);try{e=u(e),a(this.root).chown(e,!1,t,r,n)}catch(e){n(e)}}chownSync(e,t,r){e=u(e),a(this.root).chownSync(e,!1,t,r)}lchown(e,t,r,n=g){n=y(n,1);try{e=u(e),a(this.root).chown(e,!0,t,r,n)}catch(e){n(e)}}lchownSync(e,t,r){e=u(e),a(this.root).chownSync(e,!0,t,r)}chmod(e,t,r=g){r=y(r,1);try{var n=l(t,-1);if(n<0)throw new f(h.EINVAL,\"Invalid mode.\");a(this.root).chmod(u(e),!1,n,r)}catch(e){r(e)}}chmodSync(e,t){t=l(t,-1);if(t<0)throw new f(h.EINVAL,\"Invalid mode.\");e=u(e),a(this.root).chmodSync(e,!1,t)}lchmod(e,t,r=g){r=y(r,1);try{var n=l(t,-1);if(n<0)throw new f(h.EINVAL,\"Invalid mode.\");a(this.root).chmod(u(e),!0,n,r)}catch(e){r(e)}}lchmodSync(e,t){t=l(t,-1);if(t<1)throw new f(h.EINVAL,\"Invalid mode.\");a(this.root).chmodSync(u(e),!0,t)}utimes(e,t,r,n=g){n=y(n,1);try{a(this.root).utimes(u(e),c(t),c(r),n)}catch(e){n(e)}}utimesSync(e,t,r){a(this.root).utimesSync(u(e),c(t),c(r))}realpath(e,t,r=0){var n=\"object\"==typeof t?t:{},t=y(\"function\"==typeof t?t:g,2);try{e=u(e),a(this.root).realpath(e,n,t)}catch(e){t(e)}}realpathSync(e,t={}){return e=u(e),a(this.root).realpathSync(e,t)}watchFile(e,t,r=0){throw new f(h.ENOTSUP)}unwatchFile(e,t=0){throw new f(h.ENOTSUP)}watch(e,t,r=0){throw new f(h.ENOTSUP)}access(e,t,r=0){throw new f(h.ENOTSUP)}accessSync(e,t){throw new f(h.ENOTSUP)}createReadStream(e,t){throw new f(h.ENOTSUP)}createWriteStream(e,t){throw new f(h.ENOTSUP)}wrapCallbacks(e){s=e}getFdForFile(e){var t=this.nextFd++;return this.fdMap[t]=e,t}fd2file(e){e=this.fdMap[e];if(e)return e;throw new f(h.EBADF,\"Invalid file descriptor.\")}closeFd(e){delete this.fdMap[e]}}}),define(\"skylark-io-files/utils\",[\"skylark-langx-binary/buffer\",\"skylark-langx-paths\",\"./file-error\",\"./error-codes\"],function(r,i,d,y){\"use strict\";var e=\"undefined\"!=typeof navigator&&!(!/(msie) ([\\w.]+)/.exec(navigator.userAgent.toLowerCase())&&-1===navigator.userAgent.indexOf(\"Trident\")),t=\"undefined\"==typeof window;function o(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function a(e){return e instanceof r?e:0===e.byteOffset&&e.byteLength===e.buffer.byteLength?n(e.buffer):r.from(e.buffer,e.byteOffset,e.byteLength)}function n(e){return r.from(e)}let s=null;function l(){return s=s||r.alloc(0)}return{deprecationMessage:function(e,t,r){e&&console.warn(`[${t}] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '${t}.Create(${JSON.stringify(r)}, callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.`)},isIE:e,isWebWorker:t,fail:function(){throw new Error(\"BFS has reached an impossible code path; please file a bug.\")},mkdirpSync:function e(t,r,n){n.existsSync(t)||(e(i.dirname(t),r,n),n.mkdirSync(t,r))},buffer2ArrayBuffer:function(e){var t=(e=o(e)).byteOffset,r=e.byteLength;return 0===t&&r===e.buffer.byteLength?e.buffer:e.buffer.slice(t,t+r)},buffer2Uint8array:o,arrayish2Buffer:function(e){return e instanceof r?e:e instanceof Uint8Array?a(e):r.from(e)},uint8Array2Buffer:a,arrayBuffer2Buffer:n,copyingSlice:function(e,t=0,r=e.length){if(t<0||r<0||r>e.length||r<t)throw new TypeError(`Invalid slice bounds on buffer of length ${e.length}: [${t}, ${r}]`);var n,i,s;return 0===e.length?l():(n=o(e),i=e[0],e[0]=s=(i+1)%255,n[0]===s?(n[0]=i,a(n.slice(t,r))):(e[0]=i,a(n.subarray(t,r))))},emptyBuffer:l,bufferValidator:function(e,t){r.isBuffer(e)?t():t(new d(y.EINVAL,\"option must be a Buffer.\"))},checkOptions:function(e,t,r){const n=e.Options;var i=e.Name;let s=0,o=!1,a=!1;function l(e){o||(e&&(o=!0,r(e)),0===--s&&a&&r())}for(const f in n)if(n.hasOwnProperty(f)){var c,u=n[f],h=t[f];if(null==h){if(!u.optional)return c=Object.keys(t).filter(e=>!(e in n)).map(e=>({str:e,distance:levenshtein(f,e)})).filter(e=>e.distance<5).sort((e,t)=>e.distance-t.distance),o?void 0:(o=!0,r(new d(y.EINVAL,`[${i}] Required option '${f}' not provided.${0<c.length?` You provided unrecognized option '${c[0].str}'; perhaps you meant to type '${f}'.`:\"\"}\nOption description: `+u.description)))}else{let e=!1;if(!(e=Array.isArray(u.type)?-1!==u.type.indexOf(typeof h):typeof h===u.type))return o?void 0:(o=!0,r(new d(y.EINVAL,`[${i}] Value provided for option ${f} is not the proper type. Expected ${Array.isArray(u.type)?`one of {${u.type.join(\", \")}}`:u.type}, but received ${typeof h}\nOption description: `+u.description)));u.validator&&(s++,u.validator(h,l))}}a=!0,0!==s||o||r()}}}),define(\"skylark-io-files/preload-file\",[\"skylark-langx-binary/buffer\",\"./files\",\"./error-codes\",\"./file-error\",\"./stats\",\"./base-file\",\"./utils\"],function(s,e,o,a,r,t,n){\"use strict\";const l=n[\"emptyBuffer\"];class i extends t{constructor(e,t,r,n,i){if(super(),this._pos=0,this._dirty=!1,this._fs=e,this._path=t,this._flag=r,this._stat=n,this._buffer=i||l(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error(`Invalid buffer: Buffer is ${this._buffer.length} long, yet Stats object specifies that file is ${this._stat.size} long.`)}getBuffer(){return this._buffer}getStats(){return this._stat}getFlag(){return this._flag}getPath(){return this._path}getPos(){return this._flag.isAppendable()?this._stat.size:this._pos}advancePos(e){return this._pos+=e}setPos(e){return this._pos=e}sync(t){try{this.syncSync(),t()}catch(e){t(e)}}syncSync(){throw new a(o.ENOTSUP)}close(t){try{this.closeSync(),t()}catch(e){t(e)}}closeSync(){throw new a(o.ENOTSUP)}stat(t){try{t(null,r.clone(this._stat))}catch(e){t(e)}}statSync(){return r.clone(this._stat)}truncate(e,t){try{this.truncateSync(e),this._flag.isSynchronous()&&!fs.getRootFS().supportsSynch()&&this.sync(t),t()}catch(e){return t(e)}}truncateSync(e){if(this._dirty=!0,!this._flag.isWriteable())throw new a(o.EPERM,\"File not opened with a writeable mode.\");var t;this._stat.mtimeMs=Date.now(),e>this._buffer.length?(t=s.alloc(e-this._buffer.length,0),this.writeSync(t,0,t.length,this._buffer.length)):(this._stat.size=e,t=s.alloc(e),this._buffer.copy(t,0,0,e),this._buffer=t),this._flag.isSynchronous()&&fs.getRootFS().supportsSynch()&&this.syncSync()}write(e,t,r,n,i){try{i(null,this.writeSync(e,t,r,n),e)}catch(e){i(e)}}writeSync(e,t,r,n){var i;if(this._dirty=!0,null==n&&(n=this.getPos()),this._flag.isWriteable())return(i=n+r)>this._stat.size&&(this._stat.size=i)>this._buffer.length&&(i=s.alloc(i),this._buffer.copy(i),this._buffer=i),i=e.copy(this._buffer,n,t,t+r),this._stat.mtimeMs=Date.now(),this._flag.isSynchronous()?this.syncSync():this.setPos(n+i),i;throw new a(o.EPERM,\"File not opened with a writeable mode.\")}read(e,t,r,n,i){try{i(null,this.readSync(e,t,r,n),e)}catch(e){i(e)}}readSync(e,t,r,n){if(this._flag.isReadable())return(n=null==n?this.getPos():n)+r>this._stat.size&&(r=this._stat.size-n),e=this._buffer.copy(e,t,n,n+r),this._stat.atimeMs=Date.now(),this._pos=n+r,e;throw new a(o.EPERM,\"File not opened with a readable mode.\")}chmod(e,t){try{this.chmodSync(e),t()}catch(e){t(e)}}chmodSync(e){if(!this._fs.supportsProps())throw new a(o.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()}isDirty(){return this._dirty}resetDirty(){this._dirty=!1}}return e.PreloadFile=i}),define(\"skylark-io-files/no-sync-file\",[\"./files\",\"./preload-file\"],function(e,t){\"use strict\";class r extends t{constructor(e,t,r,n,i){super(e,t,r,n,i)}sync(e){e()}syncSync(){}close(e){e()}closeSync(){}}return e.NoSyncFile=r}),define(\"skylark-io-files/providers/registry\",[\"../files\"],function(e){var r={};return e.providers.registry={get:function(e){return r[e]},add:function(e,t){r[e]=t}}}),define(\"skylark-io-files/configure\",[\"./files\",\"./file-system\",\"./error-codes\",\"./file-error\",\"./providers/registry\"],function(e,t,n,u,h){\"use strict\";var i=e.fs=new t;return e.configure=function(e,r){!function t(e,i){const r=e.fs;if(!r)return i(new u(n.EPERM,'Missing \"fs\" property on configuration object.'));const s=e.options;let o=0;let a=!1;function l(){if(!a){a=!0;const e=h.get(r);e?e.Create(s,i):i(new u(n.EPERM,`File system ${r} is not available in BrowserFS.`))}}if(null!==s&&\"object\"==typeof s){let n=!1;const c=Object.keys(s).filter(e=>\"fs\"!==e);c.forEach(r=>{const e=s[r];null!==e&&\"object\"==typeof e&&e.fs&&(o++,t(e,function(e,t){o--,e?a||(a=!0,i(e)):(s[r]=t,0===o&&n&&l())}))}),n=!0}0===o&&l()}(e,(e,t)=>{t?(i.initialize(t),r(null,i)):r(e)})}}),define(\"skylark-io-files/providers/base-provider\",[\"skylark-langx-binary/buffer\",\"skylark-langx-paths\",\"../files\",\"../error-codes\",\"../file-error\",\"../action-type\",\"../file-flag\",\"../utils\"],function(a,o,e,l,c,u,r,t){\"use strict\";const h=t[\"fail\"];return e.providers.BaseProvider=class{supportsLinks(){return!1}diskSpace(e,t){t(0,0)}openFile(e,t,r){throw new c(l.ENOTSUP)}createFile(e,t,r,n){throw new c(l.ENOTSUP)}open(r,n,i,s){this.stat(r,!1,(e,t)=>{if(e)switch(n.pathNotExistsAction()){case u.CREATE_FILE:return this.stat(o.dirname(r),!1,(e,t)=>{e?s(e):t&&!t.isDirectory()?s(c.ENOTDIR(o.dirname(r))):this.createFile(r,n,i,s)});case u.THROW_EXCEPTION:return s(c.ENOENT(r));default:return s(new c(l.EINVAL,\"Invalid FileFlag object.\"))}else{if(t&&t.isDirectory())return s(c.EISDIR(r));switch(n.pathExistsAction()){case u.THROW_EXCEPTION:return s(c.EEXIST(r));case u.TRUNCATE_FILE:return this.openFile(r,n,(e,t)=>{e?s(e):t?t.truncate(0,()=>{t.sync(()=>{s(null,t)})}):h()});case u.NOP:return this.openFile(r,n,s);default:return s(new c(l.EINVAL,\"Invalid FileFlag object.\"))}}})}rename(e,t,r){r(new c(l.ENOTSUP))}renameSync(e,t){throw new c(l.ENOTSUP)}stat(e,t,r){r(new c(l.ENOTSUP))}statSync(e,t){throw new c(l.ENOTSUP)}openFileSync(e,t,r){throw new c(l.ENOTSUP)}createFileSync(e,t,r){throw new c(l.ENOTSUP)}openSync(t,r,n){let e;try{e=this.statSync(t,!1)}catch(e){switch(r.pathNotExistsAction()){case u.CREATE_FILE:if(this.statSync(o.dirname(t),!1).isDirectory())return this.createFileSync(t,r,n);throw c.ENOTDIR(o.dirname(t));case u.THROW_EXCEPTION:throw c.ENOENT(t);default:throw new c(l.EINVAL,\"Invalid FileFlag object.\")}}if(e.isDirectory())throw c.EISDIR(t);switch(r.pathExistsAction()){case u.THROW_EXCEPTION:throw c.EEXIST(t);case u.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,e.mode);case u.NOP:return this.openFileSync(t,r,n);default:throw new c(l.EINVAL,\"Invalid FileFlag object.\")}}unlink(e,t){t(new c(l.ENOTSUP))}unlinkSync(e){throw new c(l.ENOTSUP)}rmdir(e,t){t(new c(l.ENOTSUP))}rmdirSync(e){throw new c(l.ENOTSUP)}mkdir(e,t,r){r(new c(l.ENOTSUP))}mkdirSync(e,t){throw new c(l.ENOTSUP)}readdir(e,t){t(new c(l.ENOTSUP))}readdirSync(e){throw new c(l.ENOTSUP)}exists(e,t){this.stat(e,null,function(e){t(!e)})}existsSync(e){try{return this.statSync(e,!0),!0}catch(e){return!1}}realpath(t,e,r){if(this.supportsLinks()){var n=t.split(o.sep);for(let e=0;e<n.length;e++){var i=n.slice(0,e+1);n[e]=o.join.apply(null,i)}}else this.exists(t,function(e){e?r(null,t):r(c.ENOENT(t))})}realpathSync(e,t){if(this.supportsLinks()){var r=e.split(o.sep);for(let e=0;e<r.length;e++){var n=r.slice(0,e+1);r[e]=o.join.apply(path,n)}return r.join(o.sep)}if(this.existsSync(e))return e;throw c.ENOENT(e)}truncate(e,t,n){this.open(e,r.getFileFlag(\"r+\"),420,function(e,r){if(e)return n(e);r.truncate(t,function(t){r.close(function(e){n(t||e)})})})}truncateSync(e,t){e=this.openSync(e,r.getFileFlag(\"r+\"),420);try{e.truncateSync(t)}catch(e){throw e}finally{e.closeSync()}}readFile(e,i,t,s){const o=s;this.open(e,t,420,(e,n)=>{if(e)return s(e);s=function(t,r){n.close(function(e){return t=t||e,o(t,r)})},n.stat((e,t)=>{if(e)return s(e);const r=a.alloc(t.size);n.read(r,0,t.size,0,e=>{if(e)return s(e);if(null===i)return s(e,r);try{s(null,r.toString(i))}catch(e){s(e)}})})})}readFileSync(e,t,r){e=this.openSync(e,r,420);try{var n=e.statSync(),i=a.alloc(n.size);return e.readSync(i,0,n.size,0),e.closeSync(),null===t?i:i.toString(t)}finally{e.closeSync()}}writeFile(e,t,n,r,i,s){const o=s;this.open(e,r,420,function(e,r){if(e)return s(e);s=function(t){r.close(function(e){o(t||e)})};try{\"string\"==typeof t&&(t=a.from(t,n))}catch(e){return s(e)}r.write(t,0,t.length,0,s)})}writeFileSync(e,t,r,n,i){e=this.openSync(e,n,i);try{\"string\"==typeof t&&(t=a.from(t,r)),e.writeSync(t,0,t.length,0)}finally{e.closeSync()}}appendFile(e,t,n,r,i,s){const o=s;this.open(e,r,i,function(e,r){if(e)return s(e);s=function(t){r.close(function(e){o(t||e)})},\"string\"==typeof t&&(t=a.from(t,n)),r.write(t,0,t.length,null,s)})}appendFileSync(e,t,r,n,i){e=this.openSync(e,n,i);try{\"string\"==typeof t&&(t=a.from(t,r)),e.writeSync(t,0,t.length,null)}finally{e.closeSync()}}chmod(e,t,r,n){n(new c(l.ENOTSUP))}chmodSync(e,t,r){throw new c(l.ENOTSUP)}chown(e,t,r,n,i){i(new c(l.ENOTSUP))}chownSync(e,t,r,n){throw new c(l.ENOTSUP)}utimes(e,t,r,n){n(new c(l.ENOTSUP))}utimesSync(e,t,r){throw new c(l.ENOTSUP)}link(e,t,r){r(new c(l.ENOTSUP))}linkSync(e,t){throw new c(l.ENOTSUP)}symlink(e,t,r,n){n(new c(l.ENOTSUP))}symlinkSync(e,t,r){throw new c(l.ENOTSUP)}readlink(e,t){t(new c(l.ENOTSUP))}readlinkSync(e){throw new c(l.ENOTSUP)}}}),define(\"skylark-io-files/providers/dropbox/dropbox-file\",[\"../../preload-file\"],function(e){\"use strict\";class t extends e{constructor(e,t,r,n,i){super(e,t,r,n,i)}sync(e){this._fs._syncFile(this.getPath(),this.getBuffer(),e)}close(e){this.sync(e)}}return t}),define(\"skylark-io-files/providers/dropbox/dropbox-provider\",[\"skylark-langx-funcs/defer\",\"skylark-langx-binary/buffer\",\"skylark-langx-paths\",\"../../files\",\"../registry\",\"../base-provider\",\"../../stats\",\"../../file-type\",\"../../file-error\",\"../../error-codes\",\"../../utils\",\"./dropbox-file\"],function(i,o,e,t,r,n,a,l,c,u,s,h){\"use strict\";const{arrayBuffer2Buffer:f,buffer2ArrayBuffer:d}=s,y=e[\"dirname\"];function p(e){return\"/\"===e?\"\":e}function g(e){var t,r=e.error;if(!r[\".tag\"]){if(r.error)return!(t=r.error)[\".tag\"]&&t.reason&&t.reason[\".tag\"]?t.reason:t;if(\"string\"==typeof r)try{var n=JSON.parse(r);if(n.error&&n.error.reason&&n.error.reason[\".tag\"])return n.error.reason}catch(e){}}return r}function m(e){if(e.user_message)return e.user_message.text;if(e.error_summary)return e.error_summary;if(\"string\"==typeof e.error)return e.error;if(\"object\"==typeof e.error)return m(e.error);throw new Error(\"Dropbox's servers gave us a garbage error message: \"+JSON.stringify(e))}function w(e,t,r){switch(e[\".tag\"]){case\"malformed_path\":return new c(u.EBADF,r,t);case\"not_found\":return c.ENOENT(t);case\"not_file\":return c.EISDIR(t);case\"not_folder\":return c.ENOTDIR(t);case\"restricted_content\":return c.EPERM(t);default:return new c(u.EIO,r,t)}}function k(e,t,r){switch(e[\".tag\"]){case\"malformed_path\":case\"disallowed_name\":return new c(u.EBADF,r,t);case\"conflict\":case\"no_write_permission\":case\"team_folder\":return c.EPERM(t);case\"insufficient_space\":return new c(u.ENOSPC,r);default:return new c(u.EIO,r,t)}}function v(r,n,i){var e={path:p(n)};r.filesDeleteV2(e).then(()=>{i()}).catch(e=>{var t=g(e);switch(t[\".tag\"]){case\"path_lookup\":i(w(t.path_lookup,n,m(e)));break;case\"path_write\":i(k(t.path_write,n,m(e)));break;case\"too_many_write_operations\":setTimeout(()=>v(r,n,i),500+300*Math.random());break;default:i(new c(u.EIO,m(e),n))}})}class b extends n{constructor(e){super(),this._client=e}static Create(e,t){t(null,new b(e.client))}static isAvailable(){return\"undefined\"!=typeof Dropbox}getName(){return b.Name}isReadOnly(){return!1}supportsSymlinks(){return!1}supportsProps(){return!1}supportsSynch(){return!1}empty(n){this.readdir(\"/\",(e,t)=>{if(t){const r=e=>{0===t.length?n():v(this._client,t.shift(),r)};r()}else n(e)})}rename(n,i,s){this.stat(i,!1,(e,t)=>{const r=()=>{var e={from_path:p(n),to_path:p(i)};this._client.filesMoveV2(e).then(()=>s()).catch(function(e){var t=g(e);switch(t[\".tag\"]){case\"from_lookup\":s(w(t.from_lookup,n,m(e)));break;case\"from_write\":s(k(t.from_write,n,m(e)));break;case\"to\":s(k(t.to,i,m(e)));break;case\"cant_copy_shared_folder\":case\"cant_nest_shared_folder\":s(new c(u.EPERM,m(e),n));break;case\"cant_move_folder_into_itself\":case\"duplicated_or_nested_paths\":s(new c(u.EBADF,m(e),n));break;case\"too_many_files\":s(new c(u.ENOSPC,m(e),n));break;default:s(new c(u.EIO,m(e),n))}})};e?r():n===i?e?s(c.ENOENT(i)):s():t&&t.isDirectory()?s(c.EISDIR(i)):this.unlink(i,e=>{e?s(e):r()})})}stat(r,e,n){var t;\"/\"===r?i(function(){n(null,new a(l.DIRECTORY,4096))}):(t={path:p(r)},this._client.filesGetMetadata(t).then(e=>{switch(e[\".tag\"]){case\"file\":n(null,new a(l.FILE,e.size));break;case\"folder\":n(null,new a(l.DIRECTORY,4096));break;case\"deleted\":n(c.ENOENT(r))}}).catch(e=>{var t=g(e);\"path\"===t[\".tag\"]?n(w(t.path,r,m(e))):n(new c(u.EIO,m(e),r))}))}openFile(r,n,i){var e={path:p(r)};this._client.filesDownload(e).then(e=>{e=e.fileBlob;const t=new FileReader;t.onload=()=>{var e=t.result;i(null,new h(this,r,n,new a(l.FILE,e.byteLength),f(e)))},t.readAsArrayBuffer(e)}).catch(e=>{var t=g(e);\"path\"===t[\".tag\"]?i(w(t.path,r,m(e))):i(new c(u.EIO,m(e),r))})}createFile(r,n,i,s){const t=o.alloc(0);var e={contents:new Blob([d(t)],{type:\"octet/stream\"}),path:p(r)};this._client.filesUpload(e).then(e=>{s(null,new h(this,r,n,new a(l.FILE,0),t))}).catch(e=>{var t=g(e);switch(t[\".tag\"]){case\"path\":s(k(t.path.reason,r,m(e)));break;case\"too_many_write_operations\":setTimeout(()=>this.createFile(r,n,i,s),500+300*Math.random());break;default:s(new c(u.EIO,m(e),r))}})}unlink(r,n){this.stat(r,!1,(e,t)=>{t?t.isDirectory()?n(c.EISDIR(r)):v(this._client,r,n):n(e)})}rmdir(r,n){this.readdir(r,(e,t)=>{t?0<t.length?n(c.ENOTEMPTY(r)):v(this._client,r,n):n(e)})}mkdir(r,n,i){const s=y(r);this.stat(s,!1,(e,t)=>{e?i(e):t&&!t.isDirectory()?i(c.ENOTDIR(s)):(e={path:p(r)},this._client.filesCreateFolderV2(e).then(()=>i()).catch(e=>{\"too_many_write_operations\"===g(e)[\".tag\"]?setTimeout(()=>this.mkdir(r,n,i),500+300*Math.random()):i(k(g(e).path,r,m(e)))}))})}readdir(t,r){var e={path:p(t)};this._client.filesListFolder(e).then(e=>{!function t(r,n,e,i,s){const o=e.entries.map(e=>e.path_display).filter(e=>!!e);const a=i.concat(o);if(e.has_more){const l={cursor:e.cursor};r.filesListFolderContinue(l).then(e=>{t(r,n,e,a,s)}).catch(e=>{E(e,n,s)})}else s(null,a)}(this._client,t,e,[],r)}).catch(e=>{E(e,t,r)})}_syncFile(r,n,i){var e={contents:new Blob([d(n)],{type:\"octet/stream\"}),path:p(r),mode:{\".tag\":\"overwrite\"}};this._client.filesUpload(e).then(()=>{i()}).catch(e=>{var t=g(e);switch(t[\".tag\"]){case\"path\":i(k(t.path.reason,r,m(e)));break;case\"too_many_write_operations\":setTimeout(()=>this._syncFile(r,n,i),500+300*Math.random());break;default:i(new c(u.EIO,m(e),r))}})}}function E(e,t,r){var n=g(e);\"path\"===n[\".tag\"]?r(w(n.path,t,m(e))):r(new c(u.EIO,m(e),t))}return b.Name=\"DropboxV2\",b.Options={client:{type:\"object\",description:\"An *authenticated* Dropbox client. Must be from the 2.5.x JS SDK.\"}},b.DropboxFile=h,r.add(\"dropbox\",b),t.providers.DropboxProvider=b}),define(\"skylark-langx-async/async\",[\"skylark-langx-ns\"],function(e){return e.attach(\"langx.async\")}),define(\"skylark-langx-async/deferred\",[\"skylark-langx-arrays\",\"skylark-langx-funcs\",\"skylark-langx-objects\",\"./async\"],function(e,t,r,n){\"use strict\";function o(){var r=this;this.promise=c(new Promise(function(e,t){r._resolve=e,r._reject=t}))}var i=Array.prototype.slice,a=t.proxy,s=e.makeArray,l=r.result;(0,r.mixin)(Promise.prototype,{always:function(e){return this.then(e,e),this},done:function(){for(var e=0;e<arguments.length;e++)this.then(arguments[e]);return this},fail:function(e){return this.catch(e),this}});function c(e){var t,r,n,i,s;return e.isResolved||(n=r=!(t=!0),(e=e.then(function(e){return t=!(n=!0),e},function(e){throw t=!(r=!0),e})).isResolved=function(){return n},e.isPending=function(){return t},e.isRejected=function(){return r},e.state=function(){return n?\"resolved\":r?\"rejected\":\"pending\"},i=[],s=[],e.then=function(t,r,e){return e&&this.progress(e),c(Promise.prototype.then.call(this,t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)},r&&function(e){return e&&void 0!==e.__ctx__?r.apply(e.__ctx__,e):r(e)}))},e.progress=function(t){return i.forEach(function(e){t(e)}),s.push(t),this},e.pipe=e.then,e.notify=function(t){try{return i.push(t),s.forEach(function(e){return e(t)})}catch(e){this.reject(e)}return this}),e}return o.prototype.resolve=function(e){var t=i.call(arguments);return this.resolveWith(null,t)},o.prototype.resolveWith=function(e,t){return(t=t?s(t):[]).__ctx__=e,this._resolve(t),this._resolved=!0,this},o.prototype.notify=function(e){return l(this,\"promise\").notify(e),this},o.prototype.reject=function(e){var t=i.call(arguments);return this.rejectWith(null,t)},o.prototype.rejectWith=function(e,t){return(t=t?s(t):[]).__ctx__=e,this._reject(t),this._rejected=!0,this},o.prototype.isResolved=function(){return l(this,\"promise\").isResolved()},o.prototype.isRejected=function(){return l(this,\"promise\").isRejected()},o.prototype.state=function(){return l(this,\"promise\").state()},o.prototype.then=function(e,t,r){return l(this,\"promise\").then(e,t,r)},o.prototype.progress=function(e){return l(this,\"promise\").progress(e)},o.prototype.catch=function(e){return l(this,\"promise\").catch(e)},o.prototype.always=function(){var e=l(this,\"promise\");return e.always.apply(e,arguments),this},o.prototype.done=function(){var e=l(this,\"promise\");return e.done.apply(e,arguments),this},o.prototype.fail=function(e){return l(this,\"promise\").fail(e),this},o.all=function(e){var t=new o;return Promise.all(e).then(t.resolve.bind(t),t.reject.bind(t)),l(t,\"promise\")},o.first=function(e){return c(Promise.race(e))},o.when=function(e,t,r,n){var i=e&&\"function\"==typeof e.then,s=i&&e instanceof Promise;return i?(s||(i=new o(e.cancel),e.then(a(i.resolve,i),a(i.reject,i),i.notify),e=i.promise),t||r||n?e.then(t,r,n):e):1<arguments.length?t?t(e):e:(new o).resolve(e)},o.reject=function(e){var t=new o;return t.reject(e),t.promise},o.immediate=o.resolve=function(e){var t=new o;return t.resolve.apply(t,arguments),t.promise},o.promise=function(e){var t=new o;return e(t.resolve.bind(t),t.reject.bind(t),t.progress.bind(t)),t.promise},n.Deferred=o}),define(\"skylark-langx-async/each\",[\"./async\"],function(e){return e.each=function(n,t,i){if(0===n.length)return i(void 0,n);var s=new Array(n.length),o=0,a=!1;n.forEach(function(e,r){t(e,function(e,t){if(!a)return e?(a=!0,i(e)):(s[r]=t,(o+=1)===n.length?i(void 0,s):void 0)})})}}),define(\"skylark-langx-async/parallel\",[\"skylark-langx-objects\",\"./async\",\"./deferred\"],function(t,e,s){return e.parallel=function(e,r,n){var i=[];return n=n||null,r=r||[],t.each(e,function(e,t){i.push(t.apply(n,r))}),s.all(i)}}),define(\"skylark-langx-async/series\",[\"skylark-langx-objects\",\"./async\",\"./deferred\"],function(o,e,a){return e.series=function(e,r,n){var i=[],t=new a,s=t.promise;return n=n||null,r=r||[],t.resolve(),o.each(e,function(e,t){s=s.then(function(){return t.apply(n,r)}),i.push(s)}),a.all(i)}}),define(\"skylark-langx-async/waterful\",[\"skylark-langx-objects\",\"./async\",\"./deferred\"],function(s,e,o){return e.waterful=function(e,t,r){var n=new o,i=n.promise;return n.resolveWith(r=r||null,t=t||[]),s.each(e,function(e,t){i=i.then(t)}),i}}),define(\"skylark-langx-async/main\",[\"./async\",\"./deferred\",\"./each\",\"./parallel\",\"./series\",\"./waterful\"],function(e){return e}),define(\"skylark-langx-async\",[\"skylark-langx-async/main\"],function(e){return e}),define(\"skylark-io-files/providers/html5/html5-lfs-file\",[\"../../utils\",\"../../preload-file\"],function(e,t){\"use strict\";const i=e[\"buffer2ArrayBuffer\"];class r extends t{constructor(e,t,r,n,i,s){super(e,r,n,i,s),this._entry=t}sync(n){if(!this.isDirty())return n();this._entry.createWriter(t=>{var e=this.getBuffer(),e=new Blob([i(e)]);const r=e.size;t.onwriteend=e=>{t.onwriteend=null,t.onerror=null,t.truncate(r),this.resetDirty(),n()},t.onerror=e=>{n(convertError(e,this.getPath(),!1))},t.write(e)})}close(e){this.sync(e)}}return r}),define(\"skylark-io-files/providers/html5/html5-lfs-provider\",[\"skylark-langx-async\",\"skylark-langx-paths\",\"../../files\",\"../registry\",\"../../preload-file\",\"../base-provider\",\"../../error-codes\",\"../../file-error\",\"../../action-type\",\"../../stats\",\"../../file-type\",\"../../utils\",\"./html5-lfs-file\"],function(e,c,t,r,n,i,u,h,l,o,a,s,f){\"use strict\";const d=e.each,y=s[\"arrayBuffer2Buffer\"];const p=window.webkitRequestProvider||window.requestProvider||null;function g(e,t,r){switch(e.name){case\"PathExistsError\":return h.EEXIST(t);case\"QuotaExceededError\":return h.FileError(u.ENOSPC,t);case\"NotFoundError\":return h.ENOENT(t);case\"SecurityError\":return h.FileError(u.EACCES,t);case\"InvalidModificationError\":return h.FileError(u.EPERM,t);case\"TypeMismatchError\":return h.FileError(r?u.ENOTDIR:u.EISDIR,t);default:return h.FileError(u.EINVAL,t)}}class m extends i{constructor(e=5,t=window.PERSISTENT){super(),this.size=1048576*e,this.type=t}static Create(e,t){const r=new m(e.size,e.type);r._allocate(e=>e?t(e):t(null,r))}static isAvailable(){return!!p}getName(){return m.Name}isReadOnly(){return!1}supportsSymlinks(){return!1}supportsProps(){return!1}supportsSynch(){return!1}empty(r){this._readdir(\"/\",(t,e)=>{t?r(t):d(e,(t,r)=>{var e=()=>{r()},n=e=>{r(g(e,t.fullPath,!t.isDirectory))};t.isDirectory?t.removeRecursively(e,n):t.remove(e,n)},e=>{t?r(t):r()})})}rename(n,i,s){let t=2,e=0;const o=this.fs.root;let a=n;const l=e=>{--t<=0&&s(g(e,a,!1))};var r=r=>2==++e?s(new h(u.EINVAL,\"Something was identified as both a file and a directory. This should never happen.\")):n===i?s():(a=c.dirname(i),void o.getDirectory(a,{},e=>{a=c.basename(i),r.moveTo(e,a,e=>{s()},t=>{r.isDirectory?(a=i,this.unlink(i,e=>{e?l(t):this.rename(n,i,s)})):l(t)})},l));o.getFile(n,{},r,l),o.getDirectory(n,{},r,l)}stat(t,e,r){const n={create:!1};const i=e=>{var t=new o(a.DIRECTORY,4096);r(null,t)},s=e=>{r(g(e,t,!1))};this.fs.root.getFile(t,n,e=>{e.file(e=>{e=new o(a.FILE,e.size);r(null,e)},s)},()=>{this.fs.root.getDirectory(t,n,i,s)})}open(s,o,e,a){const t=e=>{\"InvalidModificationError\"===e.name&&o.isExclusive()?a(h.EEXIST(s)):a(g(e,s,!1))};this.fs.root.getFile(s,{create:o.pathNotExistsAction()===l.CREATE_FILE,exclusive:o.isExclusive()},i=>{i.file(r=>{const n=new FileReader;n.onloadend=e=>{var t=this._makeFile(s,i,o,r,n.result);a(null,t)},n.onerror=e=>{t(n.error)},n.readAsArrayBuffer(r)},t)},t)}unlink(e,t){this._remove(e,t,!0)}rmdir(r,n){this.readdir(r,(e,t)=>{e?n(e):0<t.length?n(h.ENOTEMPTY(r)):this._remove(r,n,!1)})}mkdir(t,e,r){this.fs.root.getDirectory(t,{create:!0,exclusive:!0},e=>{r()},e=>{r(g(e,t,!0))})}readdir(e,i){this._readdir(e,(e,t)=>{if(!t)return i(e);var r=[];for(const n of t)r.push(n.name);i(null,r)})}_makeFile(e,t,r,n,i=new ArrayBuffer(0)){n=new o(a.FILE,n.size),i=y(i);return new f(this,t,e,r,n,i)}_readdir(t,i){const s=e=>{i(g(e,t,!0))};this.fs.root.getDirectory(t,{create:!1},e=>{const t=e.createReader();let r=[];const n=()=>{t.readEntries(e=>{e.length?(r=r.concat(Array.prototype.slice.call(e||[],0)),n()):i(null,r)},s)};n()},s)}_allocate(t){const r=e=>{this.fs=e,t()},n=e=>{t(g(e,\"/\",!0))};if(this.type===window.PERSISTENT){var e=this.type,i=this.size,s=e=>{p(this.type,e,r,n)},o=n;if(void 0!==navigator.webkitPersistentStorage)switch(e){case window.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(i,s,o);break;case window.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(i,s,o);break;default:o(new TypeError(\"Invalid storage type: \"+e))}else window.webkitStorageInfo.requestQuota(e,i,s,o)}else p(this.type,this.size,r,n)}_remove(t,r,n){var e=e=>{e.remove(()=>{r()},e=>{r(g(e,t,!n))})},i=e=>{r(g(e,t,!n))},s={create:!1};n?this.fs.root.getFile(t,s,e,i):this.fs.root.getDirectory(t,s,e,i)}}return m.Name=\"Html5LfsProvider\",m.Options={size:{type:\"number\",optional:!0,description:\"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5.\"},type:{type:\"number\",optional:!0,description:\"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT.\"}},m.Html5LfsFile=f,r.add(\"html5Lfs\",m),m}),define(\"skylark-io-files/providers/http/xhr\",[\"skylark-langx-binary/buffer\",\"../../error-codes\",\"../../file-error\",\"../../utils\"],function(o,a,l,e){\"use strict\";const{isIE:t,emptyBuffer:s}=e;function n(e,t,r){const n=new XMLHttpRequest;n.open(\"HEAD\",t,e),n.onreadystatechange=function(e){if(4===n.readyState){if(200!==n.status)return r(new l(a.EIO,\"XHR HEAD error: response returned code \"+n.status));try{return r(null,parseInt(n.getResponseHeader(\"Content-Length\")||\"-1\",10))}catch(e){return r(new l(a.EIO,\"XHR HEAD error: Could not read content-length.\"))}}},n.send()}return{xhrIsAvailable:\"undefined\"!=typeof XMLHttpRequest&&null!==XMLHttpRequest,asyncDownloadFile:function(e,t,r){const n=new XMLHttpRequest;n.open(\"GET\",e,!0);let i=!0;switch(t){case\"buffer\":n.responseType=\"arraybuffer\";break;case\"json\":try{n.responseType=\"json\",i=\"json\"===n.responseType}catch(e){i=!1}break;default:return r(new l(a.EINVAL,\"Invalid download type: \"+t))}n.onreadystatechange=function(e){if(4===n.readyState){if(200!==n.status)return r(new l(a.EIO,\"XHR error: response returned code \"+n.status));switch(t){case\"buffer\":return r(null,n.response?o.from(n.response):s());case\"json\":return i?r(null,n.response):r(null,JSON.parse(n.responseText))}}},n.send()},syncDownloadFile:t&&\"undefined\"!=typeof Blob?function(e,t){const r=new XMLHttpRequest;switch(r.open(\"GET\",e,!1),t){case\"buffer\":r.responseType=\"arraybuffer\";break;case\"json\":break;default:throw new l(a.EINVAL,\"Invalid download type: \"+t)}let n,i;if(r.onreadystatechange=function(e){if(4===r.readyState)if(200===r.status)switch(t){case\"buffer\":n=o.from(r.response);break;case\"json\":n=JSON.parse(r.response)}else i=new l(a.EIO,\"XHR error: response returned code \"+r.status)},r.send(),i)throw i;return n}:function(e,r){const n=new XMLHttpRequest;n.open(\"GET\",e,!1);let i=null,s=null;if(n.overrideMimeType(\"text/plain; charset=x-user-defined\"),n.onreadystatechange=function(e){if(4===n.readyState)if(200===n.status)switch(r){case\"buffer\":var t=n.responseText;i=o.alloc(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return;case\"json\":return void(i=JSON.parse(n.responseText))}else s=new l(a.EIO,\"XHR error: response returned code \"+n.status)},n.send(),s)throw s;return i},getFileSizeSync:function(e){let r=-1;return n(!1,e,function(e,t){if(e)throw e;r=t}),r},getFileSizeAsync:function(e,t){n(!0,e,t)}}}),define(\"skylark-io-files/providers/http/fetch\",[\"skylark-langx-binary/buffer\",\"../../error-codes\",\"../../file-error\"],function(i,s,o){\"use strict\";return{fetchIsAvailable:\"undefined\"!=typeof fetch&&null!==fetch,fetchFileAsync:function(e,t,r){let n;try{n=fetch(e)}catch(e){return r(new o(s.EINVAL,e.message))}n.then(e=>{if(!e.ok)return r(new o(s.EIO,\"fetch error: response returned code \"+e.status));switch(t){case\"buffer\":e.arrayBuffer().then(e=>r(null,i.from(e))).catch(e=>r(new o(s.EIO,e.message)));break;case\"json\":e.json().then(e=>r(null,e)).catch(e=>r(new o(s.EIO,e.message)));break;default:r(new o(s.EINVAL,\"Invalid download type: \"+t))}}).catch(e=>r(new o(s.EIO,e.message)))},fetchFileSizeAsync:function(e,t){fetch(e,{method:\"HEAD\"}).then(e=>e.ok?t(null,parseInt(e.headers.get(\"Content-Length\")||\"-1\",10)):t(new o(s.EIO,\"fetch HEAD error: response returned code \"+e.status))).catch(e=>t(new o(s.EIO,e.message)))}}}),define(\"skylark-io-files/inodes/dir-inode\",[\"skylark-langx-paths\",\"../stats\",\"../file-type\"],function(e,t,r){\"use strict\";class n{constructor(e=null){this.data=e,this._ls={}}isFile(){return!1}isDir(){return!0}getData(){return this.data}getStats(){return new t(r.DIRECTORY,4096,365)}getListing(){return Object.keys(this._ls)}getItem(e){e=this._ls[e];return e||null}addItem(e,t){return!(e in this._ls||(this._ls[e]=t,0))}remItem(e){var t=this._ls[e];return void 0===t?null:(delete this._ls[e],t)}}return n.isDirInode=function(e){return!!e&&e.isDir()},n}),define(\"skylark-io-files/inodes/file-inode\",[],function(){\"use strict\";class e{constructor(e){this.data=e}isFile(){return!0}isDir(){return!1}getData(){return this.data}setData(e){this.data=e}}return e.isFileInode=function(e){return!!e&&e.isFile()},e}),define(\"skylark-io-files/inodes/file-index\",[\"skylark-langx-paths\",\"../stats\",\"../file-type\",\"./dir-inode\",\"./file-inode\"],function(r,h,f,d,y){\"use strict\";return class p{constructor(){this._index={},this.addPath(\"/\",new d)}static fromListing(e){for(var t=new p,r=new d,n=[[\"\",e,t._index[\"/\"]=r]];0<n.length;){let e;var i,s,o=n.pop(),a=o[0],l=o[1],c=o[2];for(const u in l)l.hasOwnProperty(u)&&(i=l[u],s=a+\"/\"+u,i?(t._index[s]=e=new d,n.push([s,i,e])):e=new y(new h(f.FILE,-1,365)),c)&&(c._ls[u]=e)}return t}fileIterator(e){for(const n in this._index)if(this._index.hasOwnProperty(n)){var t=this._index[n];for(const i of t.getListing()){var r=t.getItem(i);y.isFileInode(r)&&e(r.getData())}}}addPath(e,t){if(!t)throw new Error(\"Inode must be specified\");if(\"/\"!==e[0])throw new Error(\"Path must be absolute, got: \"+e);if(this._index.hasOwnProperty(e))return this._index[e]===t;var r=(n=this._split_path(e))[0],n=n[1];let i=this._index[r];return!(void 0===i&&\"/\"!==e&&(i=new d,!this.addPath(r,i))||\"/\"!==e&&!i.addItem(n,t)||(d.isDirInode(t)&&(this._index[e]=t),0))}addPathFast(e,t){var r=0===(n=e.lastIndexOf(\"/\"))?\"/\":e.substring(0,n),n=e.substring(n+1);let i=this._index[r];return void 0===i&&(i=new d,this.addPathFast(r,i)),!!i.addItem(n,t)&&(t.isDir()&&(this._index[e]=t),!0)}removePath(e){var t=(r=this._split_path(e))[0],r=r[1];if(void 0===(t=this._index[t]))return null;if(null===(t=t.remItem(r)))return null;if(d.isDirInode(t)){for(const n of t.getListing())this.removePath(e+\"/\"+n);\"/\"!==e&&delete this._index[e]}return t}ls(e){return void 0===(e=this._index[e])?null:e.getListing()}getInode(e){var t=(r=this._split_path(e))[0],r=r[1],n=this._index[t];return void 0===n?null:t===e?n:n.getItem(r)}_split_path(e){var t=r.dirname(e);return[t,e.substr(t.length+(\"/\"===t?0:1))]}}}),define(\"skylark-io-files/providers/http/http-provider\",[\"skylark-langx-async\",\"skylark-langx-paths\",\"../../files\",\"../registry\",\"../../no-sync-file\",\"../base-provider\",\"../../error-codes\",\"../../file-error\",\"../../action-type\",\"../../stats\",\"../../file-type\",\"../../utils\",\"./xhr\",\"./fetch\",\"../../inodes/dir-inode\",\"../../inodes/file-index\",\"../../inodes/file-inode\"],function(e,t,r,n,a,i,l,c,u,h,s,o,f,d,y,p,g){\"use strict\";const m=o[\"copyingSlice\"],{xhrIsAvailable:w,asyncDownloadFile:k,syncDownloadFile:v,getFileSizeAsync:b,getFileSizeSync:E}=f,{fetchIsAvailable:_,fetchFileAsync:S,fetchFileSizeAsync:x}=d,I=g.isFileInode,N=y.isDirInode;function O(){throw new c(l.ENOTSUP,\"Synchronous HTTP download methods are not available in this environment.\")}class T extends i{constructor(e,t=\"\",r=!1){super(),0<t.length&&\"/\"!==t.charAt(t.length-1)&&(t+=\"/\"),this.prefixUrl=t,this._index=p.fromListing(e),!_||r&&w?(this._requestFileAsyncInternal=k,this._requestFileSizeAsyncInternal=b):(this._requestFileAsyncInternal=S,this._requestFileSizeAsyncInternal=x),w?(this._requestFileSyncInternal=v,this._requestFileSizeSyncInternal=E):(this._requestFileSyncInternal=O,this._requestFileSizeSyncInternal=O)}static Create(r,n){void 0===r.index&&(r.index=\"index.json\"),\"string\"==typeof r.index?k(r.index,\"json\",(e,t)=>{e?n(e):n(null,new T(t,r.baseUrl))}):n(null,new T(r.index,r.baseUrl))}static isAvailable(){return w||_}empty(){this._index.fileIterator(function(e){e.fileData=null})}getName(){return T.Name}diskSpace(e,t){t(0,0)}isReadOnly(){return!0}supportsLinks(){return!1}supportsProps(){return!1}supportsSynch(){return w}preloadFile(e,t){var r=this._index.getInode(e);if(!I(r))throw c.EISDIR(e);if(null===r)throw c.ENOENT(e);e=r.getData();e.size=t.length,e.fileData=t}stat(e,t,r){var n=this._index.getInode(e);if(null===n)return r(c.ENOENT(e));let i;I(n)?(i=n.getData()).size<0?this._requestFileSizeAsync(e,function(e,t){if(e)return r(e);i.size=t,r(null,h.clone(i))}):r(null,h.clone(i)):N(n)?(i=n.getStats(),r(null,i)):r(c.FileError(l.EINVAL,e))}statSync(e,t){var r=this._index.getInode(e);if(null===r)throw c.ENOENT(e);let n;if(I(r))(n=r.getData()).size<0&&(n.size=this._requestFileSizeSync(e));else{if(!N(r))throw c.FileError(l.EINVAL,e);n=r.getStats()}return n}open(r,n,e,i){if(n.isWriteable())return i(new c(l.EPERM,r));const s=this;var t=this._index.getInode(r);if(null===t)return i(c.ENOENT(r));if(!I(t))return i(c.EISDIR(r));{const o=t.getData();switch(n.pathExistsAction()){case u.THROW_EXCEPTION:case u.TRUNCATE_FILE:return i(c.EEXIST(r));case u.NOP:if(o.fileData)return i(null,new a(s,r,n,h.clone(o),o.fileData));this._requestFileAsync(r,\"buffer\",function(e,t){return e?i(e):(o.size=t.length,o.fileData=t,i(null,new a(s,r,n,h.clone(o),t)))});break;default:return i(new c(l.EINVAL,\"Invalid FileMode object.\"))}}}openSync(e,t,r){if(t.isWriteable())throw new c(l.EPERM,e);var n=this._index.getInode(e);if(null===n)throw c.ENOENT(e);if(!I(n))throw c.EISDIR(e);var i,s=n.getData();switch(t.pathExistsAction()){case u.THROW_EXCEPTION:case u.TRUNCATE_FILE:throw c.EEXIST(e);case u.NOP:return s.fileData?new a(this,e,t,h.clone(s),s.fileData):(i=this._requestFileSync(e,\"buffer\"),s.size=i.length,s.fileData=i,new a(this,e,t,h.clone(s),i));default:throw new c(l.EINVAL,\"Invalid FileMode object.\")}}readdir(e,t){try{t(null,this.readdirSync(e))}catch(e){t(e)}}readdirSync(e){var t=this._index.getInode(e);if(null===t)throw c.ENOENT(e);if(N(t))return t.getListing();throw c.ENOTDIR(e)}readFile(e,i,t,s){const o=s;this.open(e,t,420,function(e,n){if(e)return s(e);s=function(t,r){n.close(function(e){return t=t||e,o(t,r)})};var t=n.getBuffer();if(null===i)s(e,m(t));else{var e=t,t=i,r=s;try{r(null,e.toString(t))}catch(e){r(e)}}})}readFileSync(e,t,r){e=this.openSync(e,r,420);try{var n=e.getBuffer();return null===t?m(n):n.toString(t)}finally{e.closeSync()}}_getHTTPPath(e){return\"/\"===e.charAt(0)&&(e=e.slice(1)),this.prefixUrl+e}_requestFileAsync(e,t,r){this._requestFileAsyncInternal(this._getHTTPPath(e),t,r)}_requestFileSync(e,t){return this._requestFileSyncInternal(this._getHTTPPath(e),t)}_requestFileSizeAsync(e,t){this._requestFileSizeAsyncInternal(this._getHTTPPath(e),t)}_requestFileSizeSync(e){return this._requestFileSizeSyncInternal(this._getHTTPPath(e))}}return T.Name=\"http\",T.Options={index:{type:[\"string\",\"object\"],optional:!0,description:\"URL to a file index as a JSON file or the file index object itself, generated with the make_http_index script. Defaults to `index.json`.\"},baseUrl:{type:\"string\",optional:!0,description:\"Used as the URL prefix for fetched files. Default: Fetch files relative to the index.\"},preferXHR:{type:\"boolean\",optional:!0,description:\"Whether to prefer XmlHttpRequest or fetch for async operations if both are available. Default: false\"}},n.add(\"http\",T),r.providers.HttpProvider=T}),define(\"skylark-langx-strings/strings\",[\"skylark-langx-ns\"],function(e){return e.attach(\"langx.strings\")}),define(\"skylark-langx-strings/generate-uuid\",[\"./strings\"],function(e){return e.generateUUID=function(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return(\"x\"===e?t:3&t|8).toString(16)})}}),define(\"skylark-data-collections/collections\",[\"skylark-langx-ns\"],function(e){return e.attach(\"data.collections\",{})}),define(\"skylark-data-collections/lru-node\",[\"./collections\"],function(e,t){return e.LruNode=class{constructor(e,t){this.key=e,this.value=t,this.prev=null,this.next=null}}}),define(\"skylark-data-collections/lru-cache\",[\"./collections\",\"./lru-node\"],function(e,n){return e.LruCache=class{constructor(e){this.limit=e,this.size=0,this.map={},this.head=null,this.tail=null}set(e,t){t=new n(e,t);this.map[e]?(this.map[e].value=t.value,this.remove(t.key)):this.size>=this.limit&&(delete this.map[this.tail.key],this.size--,this.tail=this.tail.prev,this.tail.next=null),this.setHead(t)}get(e){var t,r;return this.map[e]?(t=this.map[e].value,r=new n(e,t),this.remove(e),this.setHead(r),t):null}remove(e){var t=this.map[e];t&&(null!==t.prev?t.prev.next=t.next:this.head=t.next,null!==t.next?t.next.prev=t.prev:this.tail=t.prev,delete this.map[e],this.size--)}removeAll(){this.size=0,this.map={},this.head=null,this.tail=null}setHead(e){e.next=this.head,(e.prev=null)!==this.head&&(this.head.prev=e),this.head=e,null===this.tail&&(this.tail=e),this.size++,this.map[e.key]=e}}}),define(\"skylark-io-files/inodes/inode\",[\"skylark-langx-binary/buffer\",\"../stats\",\"../file-type\"],function(t,e,r){\"use strict\";return class n{constructor(e,t,r,n,i,s){this.id=e,this.size=t,this.mode=r,this.atime=n,this.mtime=i,this.ctime=s}static fromBuffer(e){if(void 0===e)throw new Error(\"NO\");return new n(e.toString(\"ascii\",30),e.readUInt32LE(0),e.readUInt16LE(4),e.readDoubleLE(6),e.readDoubleLE(14),e.readDoubleLE(22))}toStats(){return new e((61440&this.mode)===r.DIRECTORY?r.DIRECTORY:r.FILE,this.size,this.mode,this.atime,this.mtime,this.ctime)}getSize(){return 30+this.id.length}toBuffer(e=t.alloc(this.getSize())){return e.writeUInt32LE(this.size,0),e.writeUInt16LE(this.mode,4),e.writeDoubleLE(this.atime,6),e.writeDoubleLE(this.mtime,14),e.writeDoubleLE(this.ctime,22),e.write(this.id,30,this.id.length,\"ascii\"),e}update(e){let t=!1;this.size!==e.size&&(this.size=e.size,t=!0),this.mode!==e.mode&&(this.mode=e.mode,t=!0);var r=e.atime.getTime(),r=(this.atime!==r&&(this.atime=r,t=!0),e.mtime.getTime()),r=(this.mtime!==r&&(this.mtime=r,t=!0),e.ctime.getTime());return this.ctime!==r&&(this.ctime=r,t=!0),t}isFile(){return(61440&this.mode)===r.FILE}isDirectory(){return(61440&this.mode)===r.DIRECTORY}}}),define(\"skylark-io-files/providers/async-key-value-file\",[\"../files\",\"../preload-file\"],function(e,t){\"use strict\";class r extends t{constructor(e,t,r,n,i){super(e,t,r,n,i)}sync(t){this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),e=>{e||this.resetDirty(),t(e)}):t()}close(e){this.sync(e)}}return e.providers.AsyncKeyValueFile=r}),define(\"skylark-io-files/providers/async-key-value-provider\",[\"skylark-langx-strings/generate-uuid\",\"skylark-langx-binary/buffer\",\"skylark-langx-paths\",\"skylark-data-collections/lru-cache\",\"../files\",\"../error-codes\",\"../file-error\",\"../file-type\",\"../utils\",\"../inodes/inode\",\"./base-provider\",\"./async-key-value-file\"],function(o,m,w,t,e,k,v,a,r,f,n,l){\"use strict\";const c=r[\"emptyBuffer\"];let u=null;function h(e,t){if(!e)return 1;t(e)}function b(e,t,r){if(!e)return 1;t.abort(()=>{r(e)})}class i extends n{constructor(e){super(),this._cache=null,0<e&&(this._cache=new t(e))}static isAvailable(){return!0}init(e,t){this.store=e,this.makeRootDirectory(t)}getName(){return this.store.name()}isReadOnly(){return!1}supportsSymlinks(){return!1}supportsProps(){return!1}supportsSynch(){return!1}empty(t){this._cache&&this._cache.removeAll(),this.store.clear(e=>{h(e,t)&&this.makeRootDirectory(t)})}rename(o,a,l){if(this._cache){const t=this._cache,r=(this._cache=null,t.removeAll(),l);l=e=>{this._cache=t,r(e)}}const c=this.store.beginTransaction(\"readwrite\"),u=w.dirname(o),h=w.basename(o),f=w.dirname(a),d=w.basename(a),y={},p={};let g=!1;if(0===(f+\"/\").indexOf(o+\"/\"))return l(new v(k.EBUSY,u));const i=()=>{if(!g&&p.hasOwnProperty(u)&&p.hasOwnProperty(f)){const e=p[u],t=y[u],r=p[f],n=y[f];if(e[h]){const i=e[h],s=(delete e[h],()=>{r[d]=i,c.put(t.id,m.from(JSON.stringify(e)),!0,e=>{b(e,c,l)&&(u===f?c.commit(l):c.put(n.id,m.from(JSON.stringify(r)),!0,e=>{b(e,c,l)&&c.commit(l)}))})});r[d]?this.getINode(c,a,r[d],(e,t)=>{b(e,c,l)&&(t.isFile()?c.del(t.id,e=>{b(e,c,l)&&c.del(r[d],e=>{b(e,c,l)&&s()})}):c.abort(e=>{l(v.EPERM(a))}))}):s()}else l(v.ENOENT(o))}};var e=n=>{this.findINodeAndDirListing(c,n,(e,t,r)=>{e?g||(g=!0,c.abort(()=>{l(e)})):(y[n]=t,p[n]=r,i())})};e(u),u!==f&&e(f)}stat(e,t,r){var n=this.store.beginTransaction(\"readonly\");this.findINode(n,e,(e,t)=>{h(e,r)&&r(null,t.toStats())})}createFile(r,n,e,i){const t=this.store.beginTransaction(\"readwrite\"),s=c();this.commitNewFile(t,r,a.FILE,e,s,(e,t)=>{h(e,i)&&i(null,new l(this,r,n,t.toStats(),s))})}openFile(n,i,s){const t=this.store.beginTransaction(\"readonly\");this.findINode(t,n,(e,r)=>{h(e,s)&&t.get(r.id,(e,t)=>{h(e,s)&&(void 0===t?s(v.ENOENT(n)):s(null,new l(this,n,i,r.toStats(),t)))})})}unlink(e,t){this.removeEntry(e,!1,t)}rmdir(r,n){this.readdir(r,(e,t)=>{e?n(e):0<t.length?n(v.ENOTEMPTY(r)):this.removeEntry(r,!0,n)})}mkdir(e,t,r){var n=this.store.beginTransaction(\"readwrite\"),i=m.from(\"{}\");this.commitNewFile(n,e,a.DIRECTORY,t,i,r)}readdir(r,n){const i=this.store.beginTransaction(\"readonly\");this.findINode(i,r,(e,t)=>{h(e,n)&&this.getDirListing(i,r,t,(e,t)=>{h(e,n)&&n(null,Object.keys(t))})})}_sync(t,i,s,o){const a=this.store.beginTransaction(\"readwrite\");this._findINode(a,w.dirname(t),w.basename(t),(e,n)=>{b(e,a,o)&&this.getINode(a,t,n,(e,t)=>{if(b(e,a,o)){const r=t.update(s);a.put(t.id,i,!0,e=>{b(e,a,o)&&(r?a.put(n,t.toBuffer(),!0,e=>{b(e,a,o)&&a.commit(o)}):a.commit(o))})}})})}makeRootDirectory(i){const s=this.store.beginTransaction(\"readwrite\");s.get(\"/\",(e,t)=>{if(e||void 0===t){const r=(new Date).getTime(),n=new f(o(),4096,511|a.DIRECTORY,r,r,r);s.put(n.id,u=u||m.from(\"{}\"),!1,e=>{b(e,s,i)&&s.put(\"/\",n.toBuffer(),!1,e=>{e?s.abort(()=>{i(e)}):s.commit(i)})})}else s.commit(i)})}_findINode(r,n,i,s){if(this._cache){var e=this._cache.get(w.join(n,i));if(e)return s(null,e)}const o=(e,t,r)=>{e?s(e):r[i]?(e=r[i],this._cache&&this._cache.set(w.join(n,i),e),s(null,e)):s(v.ENOENT(w.resolve(n,i)))};\"/\"===n?\"\"===i?(this._cache&&this._cache.set(w.join(n,i),\"/\"),s(null,\"/\")):this.getINode(r,n,\"/\",(e,t)=>{h(e,s)&&this.getDirListing(r,n,t,(e,t)=>{o(e,0,t)})}):this.findINodeAndDirListing(r,n,o)}findINode(r,n,i){this._findINode(r,w.dirname(n),w.basename(n),(e,t)=>{h(e,i)&&this.getINode(r,n,t,i)})}getINode(e,r,t,n){e.get(t,(e,t)=>{h(e,n)&&(void 0===t?n(v.ENOENT(r)):n(null,f.fromBuffer(t)))})}getDirListing(e,r,t,n){t.isDirectory()?e.get(t.id,(e,t)=>{if(h(e,n))try{n(null,JSON.parse(t.toString()))}catch(e){n(v.ENOENT(r))}}):n(v.ENOTDIR(r))}findINodeAndDirListing(t,n,i){this.findINode(t,n,(e,r)=>{h(e,i)&&this.getDirListing(t,n,r,(e,t)=>{h(e,i)&&i(null,r,t)})})}addNewNode(e,t,r){let n=0,i;const s=()=>{5==++n?r(new v(k.EIO,\"Unable to commit data to key-value store.\")):(i=o(),e.put(i,t,!1,(e,t)=>{e||!t?s():r(null,i)}))};s()}commitNewFile(s,t,o,a,l,c){const e=w.dirname(t),u=w.basename(t),h=(new Date).getTime();if(\"/\"===t)return c(v.EEXIST(t));this.findINodeAndDirListing(s,e,(e,n,i)=>{b(e,s,c)&&(i[u]?s.abort(()=>{c(v.EEXIST(t))}):this.addNewNode(s,l,(e,t)=>{if(b(e,s,c)){const r=new f(t,l.length,a|o,h,h,h);this.addNewNode(s,r.toBuffer(),(e,t)=>{b(e,s,c)&&(i[u]=t,s.put(n.id,m.from(JSON.stringify(i)),!0,e=>{b(e,s,c)&&s.commit(e=>{b(e,s,c)&&c(null,r)})}))})}}))})}removeEntry(s,o,a){this._cache&&this._cache.remove(s);const l=this.store.beginTransaction(\"readwrite\"),e=w.dirname(s),t=w.basename(s);this.findINodeAndDirListing(l,e,(e,r,n)=>{if(b(e,l,a))if(n[t]){const i=n[t];delete n[t],this.getINode(l,s,i,(e,t)=>{b(e,l,a)&&(!o&&t.isDirectory()?l.abort(()=>{a(v.EISDIR(s))}):o&&!t.isDirectory()?l.abort(()=>{a(v.ENOTDIR(s))}):l.del(t.id,e=>{b(e,l,a)&&l.del(i,e=>{b(e,l,a)&&l.put(r.id,m.from(JSON.stringify(n)),!0,e=>{b(e,l,a)&&l.commit(a)})})}))})}else l.abort(()=>{a(v.ENOENT(s))})})}}return e.providers.AsyncKeyValueProvider=i}),define(\"skylark-io-files/providers/indexeddb/indexed-db-ro-transaction\",[\"../../file-error\",\"../../error-codes\",\"../async-key-value-provider\",\"../../utils\"],function(o,a,e,t){\"use strict\";const l=t[\"arrayBuffer2Buffer\"];function c(e,t=e.toString()){switch(e.name){case\"NotFoundError\":return new o(a.ENOENT,t);case\"QuotaExceededError\":return new o(a.ENOSPC,t);default:return new o(a.EIO,t)}}return class{constructor(e,t){this.tx=e,this.store=t}get(e,t){try{var r=this.store.get(e);r.onerror=(n=t,i=a.EIO,s=null,function(e){e.preventDefault(),n(new o(i,null!==s?s:void 0))}),r.onsuccess=e=>{e=e.target.result;t(null,void 0===e?e:l(e))}}catch(e){t(c(e))}var n,i,s}}}),define(\"skylark-io-files/providers/indexeddb/indexed-db-rw-transaction\",[\"../../file-error\",\"../../error-codes\",\"../async-key-value-provider\",\"../../utils\",\"./indexed-db-ro-transaction\"],function(i,s,e,t,r){\"use strict\";const o=t[\"buffer2ArrayBuffer\"];window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;function a(e,t=e.toString()){switch(e.name){case\"NotFoundError\":return new i(s.ENOENT,t);case\"QuotaExceededError\":return new i(s.ENOSPC,t);default:return new i(s.EIO,t)}}function l(t,r=s.EIO,n=null){return function(e){e.preventDefault(),t(new i(r,null!==n?n:void 0))}}class n extends r{constructor(e,t){super(e,t)}put(e,t,r,n){try{var i=o(t),s=r?this.store.put(i,e):this.store.add(i,e);s.onerror=l(n),s.onsuccess=e=>{n(null,!0)}}catch(e){n(a(e))}}del(e,t){try{var r=this.store.delete(e);r.onerror=l(t),r.onsuccess=e=>{t()}}catch(e){t(a(e))}}commit(e){setTimeout(e,0)}abort(e){let t=null;try{this.tx.abort()}catch(e){t=a(e)}finally{e(t)}}}return n}),define(\"skylark-io-files/providers/indexeddb/indexed-db-store\",[\"../../file-error\",\"../../error-codes\",\"./indexed-db-ro-transaction\",\"./indexed-db-rw-transaction\"],function(i,s,n,o){\"use strict\";function r(e,t=e.toString()){switch(e.name){case\"NotFoundError\":return new i(s.ENOENT,t);case\"QuotaExceededError\":return new i(s.ENOSPC,t);default:return new i(s.EIO,t)}}function a(t,r=s.EIO,n=null){return function(e){e.preventDefault(),t(new i(r,null!==n?n:void 0))}}return class l{constructor(e,t){this.db=e,this.storeName=t}static Create(t,r){var e=indexedDB.open(t,1);e.onupgradeneeded=e=>{(e=e.target.result).objectStoreNames.contains(t)&&e.deleteObjectStore(t),e.createObjectStore(t)},e.onsuccess=e=>{r(null,new l(e.target.result,t))},e.onerror=a(r,s.EACCES)}name(){return IndexedDBProvider.Name+\" - \"+this.storeName}clear(t){try{var e=this.db.transaction(this.storeName,\"readwrite\").objectStore(this.storeName).clear();e.onsuccess=e=>{setTimeout(t,0)},e.onerror=a(t)}catch(e){t(r(e))}}beginTransaction(e=\"readonly\"){var t=this.db.transaction(this.storeName,e),r=t.objectStore(this.storeName);if(\"readwrite\"===e)return new o(t,r);if(\"readonly\"===e)return new n(t,r);throw new i(s.EINVAL,\"Invalid transaction type.\")}}}),define(\"skylark-io-files/providers/indexeddb/indexed-db-provider\",[\"../../files\",\"../../file-error\",\"../../error-codes\",\"../async-key-value-provider\",\"../registry\",\"../../utils\",\"./indexed-db-store\",\"./indexed-db-ro-transaction\",\"./indexed-db-rw-transaction\"],function(e,t,r,n,i,s,o,a,l){\"use strict\";const c=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;class u extends n{constructor(e){super(e)}static Create(n={},i){o.Create(n.storeName||\"browserfs\",(e,t)=>{if(t){const r=new u(\"number\"==typeof n.cacheSize?n.cacheSize:100);r.init(t,e=>{e?i(e):i(null,r)})}else i(e)})}static isAvailable(){try{return void 0!==c&&null!==c.open(\"__browserfs_test__\")}catch(e){return!1}}}return u.Name=\"IndexedDB\",u.Options={storeName:{type:\"string\",optional:!0,description:\"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name.\"},cacheSize:{type:\"number\",optional:!0,description:\"The size of the inode cache. Defaults to 100. A size of 0 or below disables caching.\"}},u.IndexedDBROTransaction=a,u.IndexedDBRWTransaction=l,u.IndexedDBStore=o,i.add(\"indexedDB\",u),e.providers.IndexedDBProvider=u}),define(\"skylark-io-files/providers/synchronous-provider\",[\"skylark-langx-binary/buffer\",\"skylark-langx-paths\",\"../files\",\"../error-codes\",\"../file-error\",\"../action-type\",\"../file-flag\",\"../utils\",\"./base-provider\"],function(e,t,r,n,i,s,o,a,l){\"use strict\";var{}=a;class c extends l{supportsSynch(){return!0}rename(e,t,r){try{this.renameSync(e,t),r()}catch(e){r(e)}}stat(e,t,r){try{r(null,this.statSync(e,t))}catch(e){r(e)}}open(e,t,r,n){try{n(null,this.openSync(e,t,r))}catch(e){n(e)}}unlink(e,t){try{this.unlinkSync(e),t()}catch(e){t(e)}}rmdir(e,t){try{this.rmdirSync(e),t()}catch(e){t(e)}}mkdir(e,t,r){try{this.mkdirSync(e,t),r()}catch(e){r(e)}}readdir(e,t){try{t(null,this.readdirSync(e))}catch(e){t(e)}}chmod(e,t,r,n){try{this.chmodSync(e,t,r),n()}catch(e){n(e)}}chown(e,t,r,n,i){try{this.chownSync(e,t,r,n),i()}catch(e){i(e)}}utimes(e,t,r,n){try{this.utimesSync(e,t,r),n()}catch(e){n(e)}}link(e,t,r){try{this.linkSync(e,t),r()}catch(e){r(e)}}symlink(e,t,r,n){try{this.symlinkSync(e,t,r),n()}catch(e){n(e)}}readlink(e,t){try{t(null,this.readlinkSync(e))}catch(e){t(e)}}}return r.providers.SynchronousProvider=c}),define(\"skylark-io-files/providers/sync-key-value-provider\",[\"skylark-langx-strings/generate-uuid\",\"skylark-langx-binary/buffer\",\"skylark-langx-paths\",\"../files\",\"../error-codes\",\"../file-error\",\"./base-provider\",\"./synchronous-provider\",\"../utils\"],function(n,f,d,e,y,p,t,r,i){\"use strict\";const s=i[\"emptyBuffer\"];class o extends r{static isAvailable(){return!0}constructor(e){super(),this.store=e.store,this.makeRootDirectory()}getName(){return this.store.name()}isReadOnly(){return!1}supportsSymlinks(){return!1}supportsProps(){return!1}supportsSynch(){return!0}empty(){this.store.clear(),this.makeRootDirectory()}renameSync(e,t){var r=this.store.beginTransaction(\"readwrite\"),n=d.dirname(e),i=d.basename(e),s=d.dirname(t),o=d.basename(t),a=this.findINode(r,n),l=this.getDirListing(r,n,a);if(!l[i])throw p.ENOENT(e);var c=l[i];if(delete l[i],0===(s+\"/\").indexOf(e+\"/\"))throw new p(y.EBUSY,n);let u,h;if((h=s===n?(u=a,l):(u=this.findINode(r,s),this.getDirListing(r,s,u)))[o]){i=this.getINode(r,t,h[o]);if(!i.isFile())throw p.EPERM(t);try{r.del(i.id),r.del(h[o])}catch(e){throw r.abort(),e}}h[o]=c;try{r.put(a.id,f.from(JSON.stringify(l)),!0),r.put(u.id,f.from(JSON.stringify(h)),!0)}catch(e){throw r.abort(),e}r.commit()}statSync(e,t){return this.findINode(this.store.beginTransaction(\"readonly\"),e).toStats()}createFileSync(e,t,r){var n=this.store.beginTransaction(\"readwrite\"),i=s(),n=this.commitNewFile(n,e,FileType.FILE,r,i);return new SyncKeyValueFile(this,e,t,n.toStats(),i)}openFileSync(e,t){var r=this.store.beginTransaction(\"readonly\"),n=this.findINode(r,e),r=r.get(n.id);if(void 0===r)throw p.ENOENT(e);return new SyncKeyValueFile(this,e,t,n.toStats(),r)}unlinkSync(e){this.removeEntry(e,!1)}rmdirSync(e){if(0<this.readdirSync(e).length)throw p.ENOTEMPTY(e);this.removeEntry(e,!0)}mkdirSync(e,t){var r=this.store.beginTransaction(\"readwrite\"),n=f.from(\"{}\");this.commitNewFile(r,e,FileType.DIRECTORY,t,n)}readdirSync(e){var t=this.store.beginTransaction(\"readonly\");return Object.keys(this.getDirListing(t,e,this.findINode(t,e)))}_syncSync(e,t,r){var n=this.store.beginTransaction(\"readwrite\"),i=this._findINode(n,d.dirname(e),d.basename(e)),e=this.getINode(n,e,i),r=e.update(r);try{n.put(e.id,t,!0),r&&n.put(i,e.toBuffer(),!0)}catch(e){throw n.abort(),e}n.commit()}makeRootDirectory(){var e,t=this.store.beginTransaction(\"readwrite\");void 0===t.get(ROOT_NODE_ID)&&(e=(new Date).getTime(),e=new Inode(n(),4096,511|FileType.DIRECTORY,e,e,e),t.put(e.id,getEmptyDirNode(),!1),t.put(ROOT_NODE_ID,e.toBuffer(),!1),t.commit())}_findINode(t,r,n){var e=e=>{e=this.getDirListing(t,r,e);if(e[n])return e[n];throw p.ENOENT(d.resolve(r,n))};return\"/\"===r?\"\"===n?ROOT_NODE_ID:e(this.getINode(t,r,ROOT_NODE_ID)):e(this.getINode(t,r+d.sep+n,this._findINode(t,d.dirname(r),d.basename(r))))}findINode(e,t){return this.getINode(e,t,this._findINode(e,d.dirname(t),d.basename(t)))}getINode(e,t,r){e=e.get(r);if(void 0===e)throw p.ENOENT(t);return Inode.fromBuffer(e)}getDirListing(e,t,r){if(!r.isDirectory())throw p.ENOTDIR(t);e=e.get(r.id);if(void 0===e)throw p.ENOENT(t);return JSON.parse(e.toString())}addNewNode(e,t){for(var r;;)try{return r=n(),e.put(r,t,!1),r}catch(e){}throw new p(y.EIO,\"Unable to commit data to key-value store.\")}commitNewFile(t,e,r,n,i){var s=d.dirname(e),o=d.basename(e),a=this.findINode(t,s),s=this.getDirListing(t,s,a),l=(new Date).getTime();if(\"/\"===e)throw p.EEXIST(e);if(s[o])throw p.EEXIST(e);let c;try{var u=this.addNewNode(t,i),h=(c=new Inode(u,i.length,n|r,l,l,l),this.addNewNode(t,c.toBuffer()));s[o]=h,t.put(a.id,f.from(JSON.stringify(s)),!0)}catch(e){throw t.abort(),e}return t.commit(),c}removeEntry(e,t){var r=this.store.beginTransaction(\"readwrite\"),n=d.dirname(e),i=this.findINode(r,n),n=this.getDirListing(r,n,i),s=d.basename(e);if(!n[s])throw p.ENOENT(e);var o=n[s],s=(delete n[s],this.getINode(r,e,o));if(!t&&s.isDirectory())throw p.EISDIR(e);if(t&&!s.isDirectory())throw p.ENOTDIR(e);try{r.del(s.id),r.del(o),r.put(i.id,f.from(JSON.stringify(n)),!0)}catch(e){throw r.abort(),e}r.commit()}}return e.providers.SyncKeyValueProvider=o}),define(\"skylark-io-files/providers/simple-sync-rw-transaction\",[\"../files\",\"../error-codes\",\"../file-error\"],function(e,t,r){\"use strict\";return e.providers.SimpleSyncRWTransaction=class{constructor(e){this.store=e,this.originalData={},this.modifiedKeys=[]}get(e){var t=this.store.get(e);return this.stashOldValue(e,t),t}put(e,t,r){return this.markModified(e),this.store.put(e,t,r)}del(e){this.markModified(e),this.store.del(e)}commit(){}abort(){for(const t of this.modifiedKeys){var e=this.originalData[t];e?this.store.put(t,e,!0):this.store.del(t)}}stashOldValue(e,t){this.originalData.hasOwnProperty(e)||(this.originalData[e]=t)}markModified(e){-1===this.modifiedKeys.indexOf(e)&&(this.modifiedKeys.push(e),this.originalData.hasOwnProperty(e)||(this.originalData[e]=this.store.get(e)))}}}),define(\"skylark-io-files/providers/inmemory/in-memory-store\",[\"../simple-sync-rw-transaction\"],function(t){\"use strict\";return class{constructor(){this.store={}}clear(){this.store={}}beginTransaction(e){return new t(this)}get(e){return this.store[e]}put(e,t,r){return!(!r&&this.store.hasOwnProperty(e)||(this.store[e]=t,0))}del(e){delete this.store[e]}}}),define(\"skylark-io-files/providers/inmemory/in-memory-provider\",[\"../../files\",\"../registry\",\"../sync-key-value-provider\",\"./in-memory-store\"],function(e,t,r,n){\"use strict\";class i extends r{name(){return i.Name}constructor(){super({store:new n})}static Create(e,t){t(null,new i)}}return i.Name=\"InMemory\",i.Options={},i.InMemoryStore=n,t.add(\"inMemory\",i),e.providers.InMemoryProvider=i}),define(\"skylark-io-files/providers/localstorage/local-storage-store\",[\"skylark-langx-binary/buffer\",\"../simple-sync-rw-transaction\",\"../../error-codes\",\"../../file-error\"],function(r,t,n,i){\"use strict\";return class{name(){return LocalStorageProvider.Name}clear(){window.localStorage.clear()}beginTransaction(e){return new t(this)}get(e){try{var t=window.localStorage.getItem(e);if(null!==t)return r.from(t,binaryEncoding)}catch(e){}}put(e,t,r){try{return r||null===window.localStorage.getItem(e)?(window.localStorage.setItem(e,t.toString(binaryEncoding)),!0):!1}catch(e){throw new i(n.ENOSPC,\"LocalStorage is full.\")}}del(t){try{window.localStorage.removeItem(t)}catch(e){throw new i(n.EIO,\"Unable to delete key \"+t+\": \"+e)}}}}),define(\"skylark-io-files/providers/localstorage/local-storage-provider\",[\"skylark-langx-binary/buffer\",\"../../files\",\"../registry\",\"../sync-key-value-provider\",\"../../error-codes\",\"../../file-error\",\"./local-storage-store\"],function(e,t,r,n,i,s,o){\"use strict\";let a=!1,l;try{window.localStorage.setItem(\"__test__\",String.fromCharCode(55296)),a=window.localStorage.getItem(\"__test__\")===String.fromCharCode(55296)}catch(e){a=!1}l=a?\"binary_string\":\"binary_string_ie\",e.isEncoding(l);class c extends n{constructor(){super({store:new o})}static Create(e,t){t(null,new c)}static isAvailable(){return void 0!==window.localStorage}}return c.Name=\"LocalStorage\",c.Options={},c.LocalStorageStore=o,r.add(\"localStorage\",c),t.providers.LocalStorageProvider=c}),define(\"skylark-io-files/providers/mutex\",[\"skylark-langx-funcs/defer\"],function(t){\"use strict\";return class{constructor(){this._locked=!1,this._waiters=[]}lock(e){this._locked?this._waiters.push(e):(this._locked=!0,e())}unlock(){if(!this._locked)throw new Error(\"unlock of a non-locked mutex\");var e=this._waiters.shift();e?t(e):this._locked=!1}tryLock(){return!this._locked&&(this._locked=!0)}isLocked(){return this._locked}}}),define(\"skylark-io-files/providers/locked-provider\",[\"../files\",\"./mutex\"],function(e,t){\"use strict\";return e.providers.LockedProvider=class{constructor(e){this._fs=e,this._mu=new t}getName(){return\"LockedProvider<\"+this._fs.getName()+\">\"}getFSUnlocked(){return this._fs}diskSpace(e,t){this._fs.diskSpace(e,t)}isReadOnly(){return this._fs.isReadOnly()}supportsLinks(){return this._fs.supportsLinks()}supportsProps(){return this._fs.supportsProps()}supportsSynch(){return this._fs.supportsSynch()}rename(e,t,r){this._mu.lock(()=>{this._fs.rename(e,t,e=>{this._mu.unlock(),r(e)})})}renameSync(e,t){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.renameSync(e,t)}stat(e,t,r){this._mu.lock(()=>{this._fs.stat(e,t,(e,t)=>{this._mu.unlock(),r(e,t)})})}statSync(e,t){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.statSync(e,t)}open(e,t,r,n){this._mu.lock(()=>{this._fs.open(e,t,r,(e,t)=>{this._mu.unlock(),n(e,t)})})}openSync(e,t,r){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.openSync(e,t,r)}unlink(e,t){this._mu.lock(()=>{this._fs.unlink(e,e=>{this._mu.unlock(),t(e)})})}unlinkSync(e){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.unlinkSync(e)}rmdir(e,t){this._mu.lock(()=>{this._fs.rmdir(e,e=>{this._mu.unlock(),t(e)})})}rmdirSync(e){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.rmdirSync(e)}mkdir(e,t,r){this._mu.lock(()=>{this._fs.mkdir(e,t,e=>{this._mu.unlock(),r(e)})})}mkdirSync(e,t){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.mkdirSync(e,t)}readdir(e,r){this._mu.lock(()=>{this._fs.readdir(e,(e,t)=>{this._mu.unlock(),r(e,t)})})}readdirSync(e){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.readdirSync(e)}exists(e,t){this._mu.lock(()=>{this._fs.exists(e,e=>{this._mu.unlock(),t(e)})})}existsSync(e){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.existsSync(e)}realpath(e,t,r){this._mu.lock(()=>{this._fs.realpath(e,t,(e,t)=>{this._mu.unlock(),r(e,t)})})}realpathSync(e,t){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.realpathSync(e,t)}truncate(e,t,r){this._mu.lock(()=>{this._fs.truncate(e,t,e=>{this._mu.unlock(),r(e)})})}truncateSync(e,t){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.truncateSync(e,t)}readFile(e,t,r,n){this._mu.lock(()=>{this._fs.readFile(e,t,r,(e,t)=>{this._mu.unlock(),n(e,t)})})}readFileSync(e,t,r){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.readFileSync(e,t,r)}writeFile(e,t,r,n,i,s){this._mu.lock(()=>{this._fs.writeFile(e,t,r,n,i,e=>{this._mu.unlock(),s(e)})})}writeFileSync(e,t,r,n,i){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.writeFileSync(e,t,r,n,i)}appendFile(e,t,r,n,i,s){this._mu.lock(()=>{this._fs.appendFile(e,t,r,n,i,e=>{this._mu.unlock(),s(e)})})}appendFileSync(e,t,r,n,i){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.appendFileSync(e,t,r,n,i)}chmod(e,t,r,n){this._mu.lock(()=>{this._fs.chmod(e,t,r,e=>{this._mu.unlock(),n(e)})})}chmodSync(e,t,r){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.chmodSync(e,t,r)}chown(e,t,r,n,i){this._mu.lock(()=>{this._fs.chown(e,t,r,n,e=>{this._mu.unlock(),i(e)})})}chownSync(e,t,r,n){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.chownSync(e,t,r,n)}utimes(e,t,r,n){this._mu.lock(()=>{this._fs.utimes(e,t,r,e=>{this._mu.unlock(),n(e)})})}utimesSync(e,t,r){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.utimesSync(e,t,r)}link(e,t,r){this._mu.lock(()=>{this._fs.link(e,t,e=>{this._mu.unlock(),r(e)})})}linkSync(e,t){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.linkSync(e,t)}symlink(e,t,r,n){this._mu.lock(()=>{this._fs.symlink(e,t,r,e=>{this._mu.unlock(),n(e)})})}symlinkSync(e,t,r){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.symlinkSync(e,t,r)}readlink(e,r){this._mu.lock(()=>{this._fs.readlink(e,(e,t)=>{this._mu.unlock(),r(e,t)})})}readlinkSync(e){if(this._mu.isLocked())throw new Error(\"invalid sync call\");return this._fs.readlinkSync(e)}}}),define(\"skylark-io-files/providers/overlay/overlay-file\",[\"../../preload-file\"],function(e){class t extends e{constructor(e,t,r,n,i){super(e,t,r,n,i)}sync(t){this.isDirty()?this._fs._syncAsync(this,e=>{this.resetDirty(),t(e)}):t(null)}syncSync(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())}close(e){this.sync(e)}closeSync(){this.syncSync()}}return t}),define(\"skylark-io-files/providers/overlay/unlocked-overlay-provider\",[\"skylark-langx-paths\",\"../base-provider\",\"../../stats\",\"../../file-type\",\"../../file-error\",\"../../error-codes\",\"../../file-flag\",\"../../action-type\",\"./overlay-file\"],function(c,e,o,t,u,h,r,a,l){const s=\"/.deletedFiles.log\";function f(e){return 146|e}function d(e){return r.getFileFlag(e)}class n extends e{constructor(e,t){if(super(),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog=\"\",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=e,this._readable=t,this._writable.isReadOnly())throw new u(h.EINVAL,\"Writable file system must be writable.\")}static isAvailable(){return!0}getOverlayedProviders(){return{readable:this._readable,writable:this._writable}}_syncAsync(t,r){this.createParentDirectoriesAsync(t.getPath(),e=>{if(e)return r(e);this._writable.writeFile(t.getPath(),t.getBuffer(),null,d(\"w\"),t.getStats().mode,r)})}_syncSync(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,d(\"w\"),e.getStats().mode)}getName(){return OverlayFS.Name}_initialize(e){const r=this._initializeCallbacks,n=t=>{this._isInitialized=!t,this._initializeCallbacks=[],r.forEach(e=>e(t))};if(this._isInitialized)return e();r.push(e),1===r.length&&this._writable.readFile(s,\"utf8\",d(\"r\"),(e,t)=>{if(e){if(e.errno!==h.ENOENT)return n(e)}else this._deleteLog=t;this._reparseDeletionLog(),n()})}isReadOnly(){return!1}supportsSynch(){return this._readable.supportsSynch()&&this._writable.supportsSynch()}supportsLinks(){return!1}supportsProps(){return this._readable.supportsProps()&&this._writable.supportsProps()}getDeletionLog(){return this._deleteLog}restoreDeletionLog(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog(\"\")}rename(o,a,l){if(this.checkInitAsync(l)&&!this.checkPathAsync(o,l)&&!this.checkPathAsync(a,l))return o===s||a===s?l(u.EPERM(\"Cannot rename deletion log.\")):o===a?l():void this.stat(o,!1,(e,s)=>e?l(e):this.stat(a,!1,(e,t)=>{const n=this;function i(t){var e=t.shift();if(!e)return l();var r=c.resolve(o,e),e=c.resolve(a,e);n.rename(r,e,e=>{if(e)return l(e);i(t)})}let r=511;if(s.isDirectory()){if(e)return e.errno!==h.ENOENT?l(e):this._writable.exists(o,e=>{if(e)return this._writable.rename(o,a,l);this._writable.mkdir(a,r,e=>{if(e)return l(e);this._readable.readdir(o,(e,t)=>{if(e)return l();i(t)})})});if(r=t.mode,!t.isDirectory())return l(u.ENOTDIR(a));this.readdir(a,(e,t)=>{if(t&&t.length)return l(u.ENOTEMPTY(a));this._readable.readdir(o,(e,t)=>{if(e)return l();i(t)})})}if(t&&t.isDirectory())return l(u.EISDIR(a));this.readFile(o,null,d(\"r\"),(e,t)=>e?l(e):this.writeFile(a,t,null,d(\"w\"),s.mode,e=>e?l(e):this.unlink(o,l)))}))}renameSync(t,r){if(this.checkInitialized(),this.checkPath(t),this.checkPath(r),t===s||r===s)throw u.EPERM(\"Cannot rename deletion log.\");var e=this.statSync(t,!1);if(e.isDirectory()){if(t===r)return;let e=511;if(this.existsSync(r)){var n=this.statSync(r,!1);if(e=n.mode,!n.isDirectory())throw u.ENOTDIR(r);if(0<this.readdirSync(r).length)throw u.ENOTEMPTY(r)}this._writable.existsSync(t)?this._writable.renameSync(t,r):this._writable.existsSync(r)||this._writable.mkdirSync(r,e),this._readable.existsSync(t)&&this._readable.readdirSync(t).forEach(e=>{this.renameSync(c.resolve(t,e),c.resolve(r,e))})}else{if(this.existsSync(r)&&this.statSync(r,!1).isDirectory())throw u.EISDIR(r);this.writeFileSync(r,this.readFileSync(t,null,d(\"r\")),null,d(\"w\"),e.mode)}t!==r&&this.existsSync(t)&&this.unlinkSync(t)}stat(r,n,i){this.checkInitAsync(i)&&this._writable.stat(r,n,(e,t)=>{e&&e.errno===h.ENOENT?(this._deletedFiles[r]&&i(u.ENOENT(r)),this._readable.stat(r,n,(e,t)=>{t&&((t=o.clone(t)).mode=f(t.mode)),i(e,t)})):i(e,t)})}statSync(t,r){this.checkInitialized();try{return this._writable.statSync(t,r)}catch(e){if(this._deletedFiles[t])throw u.ENOENT(t);t=o.clone(this._readable.statSync(t,r));return t.mode=f(t.mode),t}}open(n,i,t,s){this.checkInitAsync(s)&&!this.checkPathAsync(n,s)&&this.stat(n,!1,(e,r)=>{if(!r)return i.pathNotExistsAction()!==a.CREATE_FILE?s(u.ENOENT(n)):this.createParentDirectoriesAsync(n,e=>e?s(e):this._writable.open(n,i,t,s));switch(i.pathExistsAction()){case a.TRUNCATE_FILE:return this.createParentDirectoriesAsync(n,e=>{if(e)return s(e);this._writable.open(n,i,t,s)});case a.NOP:return this._writable.exists(n,e=>{e?this._writable.open(n,i,t,s):((r=o.clone(r)).mode=t,this._readable.readFile(n,null,d(\"r\"),(e,t)=>{if(e)return s(e);-1===r.size&&(r.size=t.length);e=new l(this,n,i,r,t);s(null,e)}))});default:return s(u.EEXIST(n))}})}openSync(e,t,r){if(this.checkInitialized(),this.checkPath(e),e===s)throw u.EPERM(\"Cannot open deletion log.\");if(!this.existsSync(e)){if(t.pathNotExistsAction()!==a.CREATE_FILE)throw u.ENOENT(e);return this.createParentDirectories(e),this._writable.openSync(e,t,r)}switch(t.pathExistsAction()){case a.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,t,r);case a.NOP:var n,i;return this._writable.existsSync(e)?this._writable.openSync(e,t,r):(n=this._readable.readFileSync(e,null,d(\"r\")),(i=o.clone(this._readable.statSync(e,!1))).mode=r,new l(this,e,t,i,n));default:throw u.EEXIST(e)}}unlink(t,r){this.checkInitAsync(r)&&!this.checkPathAsync(t,r)&&this.exists(t,e=>{if(!e)return r(u.ENOENT(t));this._writable.exists(t,e=>{if(e)return this._writable.unlink(t,e=>{if(e)return r(e);this.exists(t,e=>{e&&this.deletePath(t),r(null)})});this.deletePath(t),r(null)})})}unlinkSync(e){if(this.checkInitialized(),this.checkPath(e),!this.existsSync(e))throw u.ENOENT(e);this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e)}rmdir(r,n){if(this.checkInitAsync(n)){const t=()=>{this.readdir(r,(e,t)=>e?n(e):t.length?n(u.ENOTEMPTY(r)):(this.deletePath(r),void n(null)))};this.exists(r,e=>{if(!e)return n(u.ENOENT(r));this._writable.exists(r,e=>{e?this._writable.rmdir(r,e=>{if(e)return n(e);this._readable.exists(r,e=>{(e?t:n)()})}):t()})})}}rmdirSync(e){if(this.checkInitialized(),!this.existsSync(e))throw u.ENOENT(e);if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(0<this.readdirSync(e).length)throw u.ENOTEMPTY(e);this.deletePath(e)}}mkdir(t,r,n){this.checkInitAsync(n)&&this.exists(t,e=>{if(e)return n(u.EEXIST(t));this.createParentDirectoriesAsync(t,e=>{if(e)return n(e);this._writable.mkdir(t,r,n)})})}mkdirSync(e,t){if(this.checkInitialized(),this.existsSync(e))throw u.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,t)}readdir(i,s){this.checkInitAsync(s)&&this.stat(i,!1,(e,t)=>e?s(e):t.isDirectory()?void this._writable.readdir(i,(e,n)=>{if(e&&\"ENOENT\"!==e.code)return s(e);!e&&n||(n=[]),this._readable.readdir(i,(e,t)=>{const r={};e=n.concat((t=!e&&t?t:[]).filter(e=>!this._deletedFiles[i+\"/\"+e])).filter(e=>{var t=!r[e];return r[e]=!0,t});s(null,e)})}):s(u.ENOTDIR(i)))}readdirSync(t){if(this.checkInitialized(),!this.statSync(t,!1).isDirectory())throw u.ENOTDIR(t);let e=[];try{e=e.concat(this._writable.readdirSync(t))}catch(e){}try{e=e.concat(this._readable.readdirSync(t).filter(e=>!this._deletedFiles[t+\"/\"+e]))}catch(e){}const r={};return e.filter(e=>{var t=!r[e];return r[e]=!0,t})}exists(t,r){this.checkInitialized(),this._writable.exists(t,e=>{if(e)return r(!0);this._readable.exists(t,e=>{r(e&&!0!==this._deletedFiles[t])})})}existsSync(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&!0!==this._deletedFiles[e]}chmod(t,r,n,i){this.checkInitAsync(i)&&this.operateOnWritableAsync(t,e=>{if(e)return i(e);this._writable.chmod(t,r,n,i)})}chmodSync(e,t,r){this.checkInitialized(),this.operateOnWritable(e,()=>{this._writable.chmodSync(e,t,r)})}chown(t,r,n,i,s){this.checkInitAsync(s)&&this.operateOnWritableAsync(t,e=>{if(e)return s(e);this._writable.chown(t,r,n,i,s)})}chownSync(e,t,r,n){this.checkInitialized(),this.operateOnWritable(e,()=>{this._writable.chownSync(e,t,r,n)})}utimes(t,r,n,i){this.checkInitAsync(i)&&this.operateOnWritableAsync(t,e=>{if(e)return i(e);this._writable.utimes(t,r,n,i)})}utimesSync(e,t,r){this.checkInitialized(),this.operateOnWritable(e,()=>{this._writable.utimesSync(e,t,r)})}deletePath(e){this._deletedFiles[e]=!0,this.updateLog(`d${e}\n`)}updateLog(e){this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(s,this._deleteLog,\"utf8\",r.getFileFlag(\"w\"),420,e=>{this._deleteLogUpdatePending=!1,e?this._deleteLogError=e:this._deleteLogUpdateNeeded&&(this._deleteLogUpdateNeeded=!1,this.updateLog(\"\"))}))}_reparseDeletionLog(){this._deletedFiles={},this._deleteLog.split(\"\\n\").forEach(e=>{this._deletedFiles[e.slice(1)]=\"d\"===e.slice(0,1)})}checkInitialized(){if(!this._isInitialized)throw new u(h.EPERM,\"OverlayProvideris not initialized. Please initialize OverlayProviderusing its initialize() method before using it.\");var e;if(null!==this._deleteLogError)throw e=this._deleteLogError,this._deleteLogError=null,e}checkInitAsync(e){var t;return this._isInitialized?null===this._deleteLogError||(t=this._deleteLogError,this._deleteLogError=null,e(t),!1):(e(new u(h.EPERM,\"OverlayProvideris not initialized. Please initialize OverlayProviderusing its initialize() method before using it.\")),!1)}checkPath(e){if(e===s)throw u.EPERM(e)}checkPathAsync(e,t){return e===s&&(t(u.EPERM(e)),!0)}createParentDirectoriesAsync(e,n){let i=c.dirname(e);const s=[],o=this;function a(){if(!s.length)return n();const r=s.pop();o._readable.stat(r,!1,(e,t)=>{if(!t)return n();o._writable.mkdir(r,t.mode,e=>{if(e)return n(e);a()})})}this._writable.stat(i,!1,function e(t,r){t?\"/\"===i?n(new u(h.EBUSY,\"Invariant failed: root does not exist!\")):(s.push(i),i=c.dirname(i),o._writable.stat(i,!1,e)):a()})}createParentDirectories(e){let t=c.dirname(e),r=[];for(;!this._writable.existsSync(t);)r.push(t),t=c.dirname(t);(r=r.reverse()).forEach(e=>{this._writable.mkdirSync(e,this.statSync(e,!1).mode)})}operateOnWritable(e,t){if(!this.existsSync(e))throw u.ENOENT(e);this._writable.existsSync(e)||this.copyToWritable(e),t()}operateOnWritableAsync(t,r){this.exists(t,e=>{if(!e)return r(u.ENOENT(t));this._writable.exists(t,e=>{if(!e)return this.copyToWritableAsync(t,r);r()})})}copyToWritable(e){var t=this.statSync(e,!1);t.isDirectory()?this._writable.mkdirSync(e,t.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,d(\"r\")),null,d(\"w\"),this.statSync(e,!1).mode)}copyToWritableAsync(n,i){this.stat(n,!1,(e,r)=>e?i(e):r.isDirectory()?this._writable.mkdir(n,r.mode,i):void this._readable.readFile(n,null,d(\"r\"),(e,t)=>{if(e)return i(e);this.writeFile(n,t,null,d(\"w\"),r.mode,i)}))}}return n}),define(\"skylark-io-files/providers/overlay/overlay-provider\",[\"skylark-langx-paths\",\"../../files\",\"../registry\",\"../../stats\",\"../../file-type\",\"../../file-error\",\"../../error-codes\",\"../../file-flag\",\"../../action-type\",\"../locked-provider\",\"./unlocked-overlay-provider\"],function(e,t,r,n,i,s,o,a,l,c,u){class h extends c{constructor(e,t){super(new u(e,t))}static Create(e,t){try{const r=new h(e.writable,e.readable);r._initialize(e=>{t(e,r)})}catch(e){t(e)}}static isAvailable(){return u.isAvailable()}getOverlayedProviders(){return super.getFSUnlocked().getOverlayedProviders()}unwrap(){return super.getFSUnlocked()}_initialize(e){super.getFSUnlocked()._initialize(e)}}return h.Name=\"OverlayProvider\",h.Options={writable:{type:\"object\",description:\"The file system to write modified files to.\"},readable:{type:\"object\",description:\"The file system that initially populates this file system.\"}},r.add(\"overlay\",h),t.providers.OverlayProvider=h}),define(\"skylark-io-files/main\",[\"./files\",\"./action-type\",\"./base-file\",\"./error-codes\",\"./error-strings\",\"./file-error\",\"./file-flag\",\"./file-system\",\"./no-sync-file\",\"./preload-file\",\"./stats\",\"./configure\",\"./providers/dropbox/dropbox-provider\",\"./providers/html5/html5-lfs-provider\",\"./providers/http/http-provider\",\"./providers/indexeddb/indexed-db-provider\",\"./providers/inmemory/in-memory-provider\",\"./providers/localstorage/local-storage-provider\",\"./providers/overlay/overlay-provider\"],function(e){return e}),define(\"skylark-io-files\",[\"skylark-io-files/main\"],function(e){return e});"]}