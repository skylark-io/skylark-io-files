/**
 * skylark-data-files - The skylark file system library
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx-binary/buffer","skylark-langx-paths","./file-error","./error-codes"],function(t,i,l,p){"use strict";var e="undefined"!=typeof navigator&&!(!/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&-1===navigator.userAgent.indexOf("Trident")),r="undefined"==typeof window;function f(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function a(e){return e instanceof t?e:0===e.byteOffset&&e.byteLength===e.buffer.byteLength?n(e.buffer):t.from(e.buffer,e.byteOffset,e.byteLength)}function n(e){return t.from(e)}let o=null;function s(){return o=o||t.alloc(0)}return{deprecationMessage:function(e,r,t){e&&console.warn(`[${r}] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '${r}.Create(${JSON.stringify(t)}, callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.`)},isIE:e,isWebWorker:r,fail:function(){throw new Error("BFS has reached an impossible code path; please file a bug.")},mkdirpSync:function e(r,t,n){n.existsSync(r)||(e(i.dirname(r),t,n),n.mkdirSync(r,t))},buffer2ArrayBuffer:function(e){var r=(e=f(e)).byteOffset,t=e.byteLength;return 0===r&&t===e.buffer.byteLength?e.buffer:e.buffer.slice(r,r+t)},buffer2Uint8array:f,arrayish2Buffer:function(e){return e instanceof t?e:e instanceof Uint8Array?a(e):t.from(e)},uint8Array2Buffer:a,arrayBuffer2Buffer:n,copyingSlice:function(e,r=0,t=e.length){if(r<0||t<0||t>e.length||t<r)throw new TypeError(`Invalid slice bounds on buffer of length ${e.length}: [${r}, ${t}]`);var n,i,o;return 0===e.length?s():(n=f(e),i=e[0],e[0]=o=(i+1)%255,n[0]===o?(n[0]=i,a(n.slice(r,t))):(e[0]=i,a(n.subarray(r,t))))},emptyBuffer:s,bufferValidator:function(e,r){t.isBuffer(e)?r():r(new l(p.EINVAL,"option must be a Buffer."))},checkOptions:function(e,r,t){const n=e.Options;var i=e.Name;let o=0,f=!1,a=!1;function s(e){f||(e&&(f=!0,t(e)),0===--o&&a&&t())}for(const d in n)if(n.hasOwnProperty(d)){var u,c=n[d],y=r[d];if(null==y){if(!c.optional)return u=Object.keys(r).filter(e=>!(e in n)).map(e=>({str:e,distance:levenshtein(d,e)})).filter(e=>e.distance<5).sort((e,r)=>e.distance-r.distance),f?void 0:(f=!0,t(new l(p.EINVAL,`[${i}] Required option '${d}' not provided.${0<u.length?` You provided unrecognized option '${u[0].str}'; perhaps you meant to type '${d}'.`:""}
Option description: `+c.description)))}else{let e=!1;if(!(e=Array.isArray(c.type)?-1!==c.type.indexOf(typeof y):typeof y===c.type))return f?void 0:(f=!0,t(new l(p.EINVAL,`[${i}] Value provided for option ${d} is not the proper type. Expected ${Array.isArray(c.type)?`one of {${c.type.join(", ")}}`:c.type}, but received ${typeof y}
Option description: `+c.description)));c.validator&&(o++,c.validator(y,s))}}a=!0,0!==o||f||t()}}});
//# sourceMappingURL=sourcemaps/utils.js.map
