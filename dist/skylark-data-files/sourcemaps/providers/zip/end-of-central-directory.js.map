{"version":3,"sources":["providers/zip/end-of-central-directory.js"],"names":["define","ErrorCodes","FileError","Stats","msdos2date","safeToString","FileHeader","FileData","constructor","data","this","readUInt32LE","EINVAL","diskNumber","readUInt16LE","cdDiskNumber","cdDiskEntryCount","cdTotalEntryCount","cdSize","cdOffset","cdZipCommentLength","cdZipComment","rawCdZipComment","slice"],"mappings":";;;;;;;AAAAA,OAAO,CACH,oBACA,mBACA,cACA,eACA,mBACA,gBACA,eACD,SAAUC,EAAYC,EAAWC,EAAOC,EAAWC,EAAaC,EAAWC,GAC1E,aA4CA,aAvBIC,YAAYC,GAER,GADAC,KAAKD,KAAOA,EACsB,YAA9BC,KAAKD,KAAKE,aAAa,CAAC,EACxB,MAAM,IAAIT,EAAUD,EAAWW,OAAQ,4EAA4EF,KAAKD,KAAKE,aAAa,CAAC,CAAG,CAEtJ,CACAE,aAAe,OAAOH,KAAKD,KAAKK,aAAa,CAAC,CAAG,CACjDC,eAAiB,OAAOL,KAAKD,KAAKK,aAAa,CAAC,CAAG,CACnDE,mBAAqB,OAAON,KAAKD,KAAKK,aAAa,CAAC,CAAG,CACvDG,oBAAsB,OAAOP,KAAKD,KAAKK,aAAa,EAAE,CAAG,CACzDI,SAAW,OAAOR,KAAKD,KAAKE,aAAa,EAAE,CAAG,CAC9CQ,WAAa,OAAOT,KAAKD,KAAKE,aAAa,EAAE,CAAG,CAChDS,qBAAuB,OAAOV,KAAKD,KAAKK,aAAa,EAAE,CAAG,CAC1DO,eAEI,OAAOhB,EAAaK,KAAKD,KAAM,CAAA,EAAM,GAAIC,KAAKU,mBAAmB,CAAC,CACtE,CACAE,kBACI,OAAOZ,KAAKD,KAAKc,MAAM,GAAI,GAAKb,KAAKU,mBAAmB,CAAC,CAC7D,CACJ,CAKJ,CAAC","file":"../../../providers/zip/end-of-central-directory.js","sourcesContent":["define([\r\n    '../../error-codes',\r\n    '../../file-error',\r\n    '../../stats',\r\n    \"./msdos2date\",\r\n    \"./safe-to-string\",\r\n    \"./file-header\",\r\n    \"./file-data\"\r\n], function (ErrorCodes, FileError, Stats, msdos2date,safeToString,FileHeader,FileData) {\r\n    'use strict';\r\n\r\n\r\n    /**\r\n     * 4.3.16: end of central directory record\r\n     *  end of central dir signature    4 bytes  (0x06054b50)\r\n     *  number of this disk             2 bytes\r\n     *  number of the disk with the\r\n     *  start of the central directory  2 bytes\r\n     *  total number of entries in the\r\n     *  central directory on this disk  2 bytes\r\n     *  total number of entries in\r\n     *  the central directory           2 bytes\r\n     *  size of the central directory   4 bytes\r\n     *  offset of start of central\r\n     *  directory with respect to\r\n     *  the starting disk number        4 bytes\r\n     *  .ZIP file comment length        2 bytes\r\n     *  .ZIP file comment       (variable size)\r\n     */\r\n    class EndOfCentralDirectory {\r\n        constructor(data) {\r\n            this.data = data;\r\n            if (this.data.readUInt32LE(0) !== 0x06054b50) {\r\n                throw new FileError(ErrorCodes.EINVAL, `Invalid Zip file: End of central directory record has invalid signature: ${this.data.readUInt32LE(0)}`);\r\n            }\r\n        }\r\n        diskNumber() { return this.data.readUInt16LE(4); }\r\n        cdDiskNumber() { return this.data.readUInt16LE(6); }\r\n        cdDiskEntryCount() { return this.data.readUInt16LE(8); }\r\n        cdTotalEntryCount() { return this.data.readUInt16LE(10); }\r\n        cdSize() { return this.data.readUInt32LE(12); }\r\n        cdOffset() { return this.data.readUInt32LE(16); }\r\n        cdZipCommentLength() { return this.data.readUInt16LE(20); }\r\n        cdZipComment() {\r\n            // Assuming UTF-8. The specification doesn't specify.\r\n            return safeToString(this.data, true, 22, this.cdZipCommentLength());\r\n        }\r\n        rawCdZipComment() {\r\n            return this.data.slice(22, 22 + this.cdZipCommentLength());\r\n        }\r\n    }\r\n\r\n\r\n    return EndOfCentralDirectory;\r\n\r\n});"]}