{"version":3,"sources":["providers/overlay/overlay-file.js"],"names":["define","PreloadFile","OverlayFile","constructor","fs","path","flag","stats","data","super","sync","cb","this","isDirty","_fs","_syncAsync","resetDirty","err","syncSync","_syncSync","close","closeSync"],"mappings":";;;;;;;AAAAA,OAAO,CACH,sBACD,SAAUC,SAKHC,UAAoBD,EACtBE,YAAYC,EAAIC,EAAMC,EAAMC,EAAOC,GAC/BC,MAAML,EAAIC,EAAMC,EAAMC,EAAOC,CAAI,CACrC,CACAE,KAAKC,GACIC,KAAKC,QAAQ,EAIlBD,KAAKE,IAAIC,WAAWH,KAAM,IACtBA,KAAKI,WAAW,EAChBL,EAAGM,CAAG,CACV,CAAC,EANGN,EAAG,IAAI,CAOf,CACAO,WACQN,KAAKC,QAAQ,IACbD,KAAKE,IAAIK,UAAUP,IAAI,EACvBA,KAAKI,WAAW,EAExB,CACAI,MAAMT,GACFC,KAAKF,KAAKC,CAAE,CAChB,CACAU,YACIT,KAAKM,SAAS,CAClB,CACJ,CAGA,OAAOhB,CACX,CAAC","file":"../../../providers/overlay/overlay-file.js","sourcesContent":["define([\r\n    '../../preload-file'\r\n], function (PreloadFile) {\r\n\r\n    /**\r\n     * Overlays a RO file to make it writable.\r\n     */\r\n    class OverlayFile extends PreloadFile {\r\n        constructor(fs, path, flag, stats, data) {\r\n            super(fs, path, flag, stats, data);\r\n        }\r\n        sync(cb) {\r\n            if (!this.isDirty()) {\r\n                cb(null);\r\n                return;\r\n            }\r\n            this._fs._syncAsync(this, (err) => {\r\n                this.resetDirty();\r\n                cb(err);\r\n            });\r\n        }\r\n        syncSync() {\r\n            if (this.isDirty()) {\r\n                this._fs._syncSync(this);\r\n                this.resetDirty();\r\n            }\r\n        }\r\n        close(cb) {\r\n            this.sync(cb);\r\n        }\r\n        closeSync() {\r\n            this.syncSync();\r\n        }\r\n    }\r\n\r\n\r\n    return OverlayFile;\r\n});"]}