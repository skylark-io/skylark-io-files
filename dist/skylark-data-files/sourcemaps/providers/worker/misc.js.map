{"version":3,"sources":["providers/worker/misc.js"],"names":["define","Stats","FileType","FileError","ErrorCodes","FileFlag","ActionType","utils","buffer2ArrayBuffer","arrayBuffer2Buffer","bufferToTransferrableObject","buff","transferrableObjectToBuffer","FileErrorLocal2Remote","errorLocal2Remote","e","type","SpecialArgType","ERROR","name","message","stack","errorRemote2Local","let","cnstr","global","err","Error","statsLocal2Remote","stats","STATS","statsData","toBuffer","statsRemote2Local","fromBuffer","fileFlagLocal2Remote","flag","FILEFLAG","flagStr","getFlagString","fileFlagRemote2Local","remoteFlag","getFileFlag","bufferLocal2Remote","BUFFER","data","bufferRemote2Local","buffArg","isAPIRequest","hasOwnProperty","isAPIResponse"],"mappings":";;;;;;;AAAAA,OAAO,CACH,cACA,kBACA,mBACA,oBACA,kBACA,oBACA,eACD,SAAWC,EAAMC,EAASC,EAAWC,EAAYC,EAASC,EAAWC,GAGpE,KAAM,CAAEC,mBAAAA,EAAoBC,mBAAAA,CAAgC,EAAKF,EAgEjE,SAASG,EAA4BC,GACjC,OAAOH,EAAmBG,CAAI,CAClC,CAIA,SAASC,EAA4BD,GACjC,OAAOF,EAAmBE,CAAI,CAClC,CA8BA,MAAO,CACHE,sBAAAA,sBACAC,kBA7FJ,SAA2BC,GACvB,MAAO,CACHC,KAAMC,eAAeC,MACrBC,KAAMJ,EAAEI,KACRC,QAASL,EAAEK,QACXC,MAAON,EAAEM,KACb,CACJ,EAuFIC,kBAnFJ,SAA2BP,GACvBQ,IAAIC,EAAQC,OAAOV,EAAEI,MAIrB,IAAMO,EAAM,IAFRF,EADmB,YAAnB,OAAO,EACCG,MAEIH,GAAMT,EAAEK,OAAO,EAE/B,OADAM,EAAIL,MAAQN,EAAEM,MACPK,CACX,EA4EIE,kBAxEJ,SAA2BC,GACvB,MAAO,CACHb,KAAMC,eAAea,MACrBC,UAAWrB,EAA4BmB,EAAMG,SAAS,CAAC,CAC3D,CACJ,EAoEIC,kBAhEJ,SAA2BJ,GACvB,OAAO5B,EAAMiC,WAAWtB,EAA4BiB,EAAME,SAAS,CAAC,CACxE,EA+DII,qBA3DJ,SAA8BC,GAC1B,MAAO,CACHpB,KAAMC,eAAeoB,SACrBC,QAASF,EAAKG,cAAc,CAChC,CACJ,EAuDIC,qBAnDJ,SAA8BC,GAC1B,OAAOpC,EAASqC,YAAYD,EAAWH,OAAO,CAClD,EAkDI5B,4BAAAA,EACAE,4BAAAA,EACA+B,mBApCJ,SAA4BhC,GACxB,MAAO,CACHK,KAAMC,eAAe2B,OACrBC,KAAMnC,EAA4BC,CAAI,CAC1C,CACJ,EAgCImC,mBA5BJ,SAA4BC,GACxB,OAAOnC,EAA4BmC,EAAQF,IAAI,CACnD,EA2BIG,aAvBJ,SAAsBH,GAClB,OAAOA,GAAwB,UAAhB,OAAOA,GAAqBA,EAAKI,eAAe,kBAAkB,GAAKJ,EAAuB,gBACjH,EAsBIK,cAlBJ,SAAuBL,GACnB,OAAOA,GAAwB,UAAhB,OAAOA,GAAqBA,EAAKI,eAAe,kBAAkB,GAAKJ,EAAuB,gBACjH,CAiBA,CACJ,CAAC","file":"../../../providers/worker/misc.js","sourcesContent":["define([\r\n    '../../stats',\r\n    '../../file-type',\r\n    '../../file-error',\r\n    '../../error-codes',\r\n    \"../../file-flag\",\r\n    \"../../action-type\",\r\n    \"../../utils\"\r\n], function ( Stats,FileType,FileError, ErrorCodes, FileFlag,ActionType,utils) {\r\n\r\n\r\n    const { buffer2ArrayBuffer, arrayBuffer2Buffer, emptyBuffer }  = utils;\r\n\r\n    /**\r\n     * @hidden\r\n     */\r\n    function FileErrorRemote2Local(e) {\r\n        return FileError.fromBuffer(transferrableObjectToBuffer(e.errorData));\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function errorLocal2Remote(e) {\r\n        return {\r\n            type: SpecialArgType.ERROR,\r\n            name: e.name,\r\n            message: e.message,\r\n            stack: e.stack\r\n        };\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function errorRemote2Local(e) {\r\n        let cnstr = global[e.name];\r\n        if (typeof (cnstr) !== 'function') {\r\n            cnstr = Error;\r\n        }\r\n        const err = new cnstr(e.message);\r\n        err.stack = e.stack;\r\n        return err;\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function statsLocal2Remote(stats) {\r\n        return {\r\n            type: SpecialArgType.STATS,\r\n            statsData: bufferToTransferrableObject(stats.toBuffer())\r\n        };\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function statsRemote2Local(stats) {\r\n        return Stats.fromBuffer(transferrableObjectToBuffer(stats.statsData));\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function fileFlagLocal2Remote(flag) {\r\n        return {\r\n            type: SpecialArgType.FILEFLAG,\r\n            flagStr: flag.getFlagString()\r\n        };\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function fileFlagRemote2Local(remoteFlag) {\r\n        return FileFlag.getFileFlag(remoteFlag.flagStr);\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function bufferToTransferrableObject(buff) {\r\n        return buffer2ArrayBuffer(buff);\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function transferrableObjectToBuffer(buff) {\r\n        return arrayBuffer2Buffer(buff);\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function bufferLocal2Remote(buff) {\r\n        return {\r\n            type: SpecialArgType.BUFFER,\r\n            data: bufferToTransferrableObject(buff)\r\n        };\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function bufferRemote2Local(buffArg) {\r\n        return transferrableObjectToBuffer(buffArg.data);\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function isAPIRequest(data) {\r\n        return data && typeof data === 'object' && data.hasOwnProperty('browserfsMessage') && data['browserfsMessage'];\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    function isAPIResponse(data) {\r\n        return data && typeof data === 'object' && data.hasOwnProperty('browserfsMessage') && data['browserfsMessage'];\r\n    }\r\n\r\n\r\n    return {\r\n        FileErrorLocal2Remote,\r\n        errorLocal2Remote,\r\n        errorRemote2Local,\r\n        statsLocal2Remote,\r\n        statsRemote2Local,\r\n        fileFlagLocal2Remote,\r\n        fileFlagRemote2Local,\r\n        bufferToTransferrableObject,\r\n        transferrableObjectToBuffer,\r\n        bufferLocal2Remote,\r\n        bufferRemote2Local,\r\n        isAPIRequest,\r\n        isAPIResponse\r\n    };\r\n});"]}